<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Weeklies</title>
  <meta name="description" content="OCaml Labs is an initiative within the Cambridge Computer Laboratory started by Anil Madhavapeddy in 2011 to promote research, growth and collaboration within the wider OCaml community.
">
  <!-- todo: include this into main.css -->
  <link rel="stylesheet" href="/css/font-awesome.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://ocamllabs.github.io//weekly.html">
  <link rel="alternate" type="application/rss+xml" title="OCaml Labs" href="https://ocamllabs.github.io//feed.xml">
</head>

  <body>
    <div class="page-content">
      <div class="container">
        <div class="three columns">
          <header class="site-header">

  <h2 class="logo">
   <a href="/">OCaml Labs</a><br />
   
   <img width="100px" src="/assets/img/origami-camel.png" />
   
  </h2>

  <div class="nav">
    
    <label for="menu-toggle" class="menu-icon">
        <!--div data-icon="ei-navicon"></div-->
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
    </label>
    <input type="checkbox" id="menu-toggle">

    <div class="site-nav">
      <nav>
        <ul class="page-link">
          <li><a href="/">Home</a></li>
          <li><a href="/news">News</a></li>
          <li><a href="/doc">Projects</a></li>
          <li><a href="/community">Community</a></li>
          <li><a href="/people">People</a></li>
          <li><a href="/papers">Papers</a></li>
          <li><a href="/talks">Talks</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/feed.xml">RSS</a></li>
        </ul>
      </nav>
    </div>

  </div>
</header>

        </div>

        <div class="nine columns" style="z-index:100;">
          <div class="wrapper">
            <div>
  <header class="furore_intro">
  <div class="archive_intro">
  
  <p>Weekly notes about activities in the group.  Please note that these are fairly raw notes, so please look at the <a href="/doc">projects</a> page for more structured information about our activities.</p>

  </div>
  </header>

  <div class="furore_week_links">
  
  
  
  
  
  
  <span class="furore_year_link">2017: </span>
  
   <span class="furore_week_link"><a href="#2017-01-23">5</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2017-01-16">4</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2017-01-09">3</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2017-01-02">2</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-12-26">1</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <span class="furore_year_link">2016: </span>
  
   <span class="furore_week_link"><a href="#2016-12-12">51</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-12-05">50</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-11-28">49</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-11-21">48</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-11-14">47</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-11-07">46</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-10-31">45</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-10-24">44</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-10-17">43</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-10-10">42</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-10-03">41</a></span>
   
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-09-26">40</a></span>
   
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-09-19">39</a></span>
   
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-08-08">33</a></span>
   
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-08-01">32</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-07-25">31</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-07-18">30</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-07-11">29</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-07-04">28</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-06-27">27</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-06-20">26</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-06-13">25</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-06-06">24</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-05-30">23</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-05-23">22</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-05-16">21</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-05-09">20</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-05-02">19</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-04-18">17</a></span>
   
  
  
  
  
  
  
  
  
  
  
  
   <span class="furore_week_link"><a href="#2016-04-11">16</a></span>
   
  
  
  </div>

  
  
  
  <div class="furore_date" id="2017-01-23">
   23 January 2017 -  29 January 2017 (Week #5)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>Implemented my iperf program using Mirage vnetif as an interconnect, and found there were still unexpected waiting(blocking) periods. So I concluded that somthing in MirageOS triggered this behavior. I will investigate a root cause of it by starting with further tracing schemes in MirageOS.</li>
      <li>Conducted further analysis based on the previously obtained results, and found that the host OS side processing(i.e. network bridging) can occupies higher than 65% of the total network processing time without the unexpected waiting periods. This is an expected result, not suprising. The host OS side processing time can be reduced by taking advantage of existing schemes such as Netmap or DPDK.</li>
      <li>Prioritized topics to be conducted
        <ol>
          <li>investigation of the waiting periods not anticipated</li>
          <li>implementation design to reduce overhead in the host OS side</li>
          <li>implementation design to reduce overhead in the MirageOS network protocol layer</li>
        </ol>
      </li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><p>storage component of Databox:</p>

<ul>
  <li>implemented tamper-proof logging feature of the store</li>
  <li>implemented store engine, providing support for json and blob(by Cstruct.t) data types</li>
  <li>browsed repo <a href="https://github.com/nojb/ocaml-macaroons">ocaml-macaroon</a> and <a href="https://github.com/rgrinberg/opium">opium</a>, for the purpose of integration into the store</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ul>
  <li>Implement a simple prototype of forward AD, but it does not support higher order derivatives. I need to read a bit more on algorithmic differentiation.</li>
  <li>Try to test some barrier control logic in distributed learning.</li>
  <li>Refactor the topic modeling module in Owl.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Fixed small bugs with lambda quoting, bootstrapped the compiler.</li>
  <li>Added some (hopefully temporary) code to print lambda quotes in the REPL.</li>
  <li>Fixed a bug on <code class="highlighter-rouge">macros_unstable</code> that caused the compiler to crash when
encountering a structure item with more than one splice in it.</li>
  <li>On the way of fixing the bug that makes codes like:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module M = struct
  $ &lt;&lt; () &gt;&gt;
end
</code></pre></div>    </div>
    <p>segfault.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Maxime Lesourd
    </div>
    <div class="furore_output"><p>I’m trying to figure out all the places in TypedTree which end up as function definitions or applications for the effect analysis.</p>

<p>I also spent some time improving error messages in the fomega tool used for the advanced functional programming course.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/gemmag.png" height="50px" /><br />
    
    Gemma Gordon
    </div>
    <div class="furore_output"><ul>
  <li>Adding more information to new OCL site - getting there!
    <ul>
      <li>Need to add projects next, most of the authors now added</li>
    </ul>
  </li>
  <li>Checking into Platform progress: odig, odoc, topkg</li>
  <li>Preparing for Maintainerati in SF (15th Feb)</li>
  <li>Planning Romain’s next project with us</li>
  <li>Preparing for Compiler Hacking next Tuesday</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: g2p
    </div>
    <div class="furore_output"><p><strong>Mirage storage</strong></p>

<ul>
  <li>Node splitting</li>
  <li>Publish the work done in January to <a href="https://github.com/g2p/mirage-storage">https://github.com/g2p/mirage-storage</a></li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><h4 id="work-on-the-implementation-in-decompress">Work on the implementation in Decompress</h4>

<p>Move the  implementation of  the compression (deflate)  in the  same way  of the
decompression.  With the work of Yallop, the implementation of <em>blosclz</em> and the
advises of Thomas,  I  try to use a  pure state for the  Lz77 compression (first
layer of Decompress) and the Zlib compression  (second layer of Decompress) to use
this implementation in <code class="highlighter-rouge">ocaml-git</code> to pack a git state.</p>

<p>For the  moment,  I have a  non-blocking implementation of  the Lz77 compression
with theses changes:</p>
<ul>
  <li>pure state</li>
  <li>non-blocking computation</li>
  <li>remove a  compute  of  a  window  -  that  means  when  the algorithm search a
pattern,  we limit to  the  input  of  the  user.  So,  if  the user compute the
compression with a chunk of 4096  bytes (for example),  we search a pattern only
on this chunk  (but  theorically,  we  can  keep  ~  28671  bytes) and the ratio
between the literal and the distance for this compression will be bad.  But,  in
a practical world,  we compute  the compression with a chunk of  32K bytes - and
in this way, we have an optimal compression.</li>
</ul>

<p>Finally,  for a file  (like  an  executable),  we  have  a  ratio  about 1/3 for
literals  and  2/3  for  matches  -   so  2/3  of  compression  without  Huffman
compression.</p>

<p>Now,  I attack  the Zlib (Huffman) compression  in the same way  (pure state and
non-blocking) to get the new release of Decompress.</p>

<h4 id="ocamlorg">ocaml.org</h4>

<p>I try to  find a bug inside  ocaml.org about the feed  generator (OCaml Planet).
In the same time,  I found lot of website with a bad or unaccesible feed.  So, I
sent an e-mail  to advise some persons  about that - like the  website of Mirage
or ocaml.io.</p>

<p>Chris00 fixed the bug (server side bug).</p>

<h4 id="encoding-and-mr-mime">Encoding and Mr. MIME</h4>

<p>It’s about the UTF-7.  Some e-mails don’t  respect the encoding described by the
standard (RFC  6532).  The point is to  create a library (but  I already discuss
about that with Daniel) to convert any encoding to UTF-8.</p>

<p>Mr.  MIME has this  problem,  we  respect  the  standard  but  not the practical
e-mail, we need to be more resilient about that.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2017-01-16">
   16 January 2017 -  22 January 2017 (Week #4)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>Conducted a test on the unix configuration, and found that the sender and receiver sides behavior was quite simple without any blocking periods. This indicates Xen or the network bridging on the hostOS can affect the blocking periods.</li>
      <li>Having additional tests where the sender(receiver) program on a MV and the receiver(sender) program on Dom0 to reduce noise from the virtualization side.</li>
      <li>Had a meeting with Docker members to explain the findings. Comments from them are as follows;
        <ul>
          <li>To try to put one of the sender or receiver sides on Linux.</li>
          <li>To try to have one unikernel VM having both the sender and receiver side using the vnetif module to completely remove noise from network bridging on the hostOS.</li>
          <li>Checksum offloading and IP fragmentation offload will help us to improve the network performance.</li>
          <li>ukvm rather than Xen would be better and easier for implementing a new network interface layer.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/stedolan.png" height="50px" /><br />
    
    Stephen Dolan
    </div>
    <div class="furore_output"><ul>
  <li>off sick monday / tues</li>
  <li>progress on memory models! (more soon..)</li>
  <li>mpi/multicore debugging with @dhil</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ul>
  <li>work done for Databox:
    <ul>
      <li>meeting with mort and Liang to clarify the functionalities/patterns of interactions for the new system components to be developped: storage and bridge.</li>
      <li>for storage, it will provide tamper-proof, append-only logging of each store operations, and it will support different data types: Json, Timeseries, Blob, etc. Later, we could be more high-level features like model based compression on this</li>
      <li>for bridge, still needs more discussion and thinking, for the first step, we could build it with “redirect point” style, which allows third parties to register/update their services, look up the others’ services, and also allows internal components to insert/delete their own plug-in functions.</li>
    </ul>
  </li>
  <li>supervision
    <ul>
      <li>IB course CompNet</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ul>
  <li>Study automatic algorithmic derivation, prepare for the implementation.</li>
  <li>Work on distributed data processing system (Actor System), document what has been done so far.</li>
  <li>Refine and formulate the idea of a new barrier control technique in distributed machine learning, write the initial draft, plan the evaluation.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>
    <p>Diagnosis of a “problem” with generation of Parsetrees and Lambdas in
parallel by macros.
To quote Leo:</p>

    <blockquote>
      <p>the best thing to do would be to start by making lambda quoting work on its
own without worrying about creating an AST
Step two would be to make the extrusion errors in terms of source variables
with locations
And step three would be to start building the AST again
The final version would, instead of producing:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let splice1 = ... in
let splice2 = ... in
let ast = ... Field(0, [splice1]) ... Field(0, [splice2]) ... in
let lambda = ... Field(1, [splice1]) ... Field(1, [splice2]) ... in
  Makeblock [ast; lambda]
</code></pre></div>      </div>

      <p>produce something like:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let splice1 = ref null in
let splice2 = ref null in
let lambda =
  ... (let res = ... in splice1 := Field(1, res); Field(0, res)) ...
  ... (let res = ... in splice2 := Field(1, res); Field(0, res)) ...
in
let ast = ... !splice1 ... !splice2 ... in
  Makeblock [lambda; ast]
</code></pre></div>      </div>

      <p>This would give us ASTs without any renaming of variables
With a bit more work we could probably get renaming as well</p>
    </blockquote>
  </li>
  <li>
    <p>Jeremy and Leo discovered three bugs, noted here for future reference:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ocaml -dsource
# static r = ~Pervasives.ref None;;
static r = (~Pervasives).ref None ;;
static val r : '_a option ~Pervasives.ref = {~Pervasives.contents = None}
# let f () = let x = 10 in $(let c = &lt;&lt;x&gt;&gt; in ~Pervasives.(:=) r (Some c); c);;
let f () =  let x = 10  in $(let c = &lt;&lt; x &gt;&gt;  in (~Pervasives).(:=) r (Some c); c) ;;
splice #1: x val f : unit -&gt; int = &lt;fun&gt;
# let g () = let x = "Hello world" in $(let open ~Pervasives in match !r with Some c -&gt; c | None -&gt; &lt;&lt; 0 &gt;&gt;);;
let g () = let x = "Hello world" in $(let open ~Pervasives in match !r with Some c -&gt; c | None -&gt; &lt;&lt; 0 &gt;&gt;);;
Warning 26: unused variable x. splice #1: x val g : unit -&gt; int = &lt;fun&gt;
# g () + 5;;
- : int = 70275569256653
</code></pre></div>    </div>

    <p><code class="highlighter-rouge">CamlinternalQuote.Exp.Local</code> should be used for all identifiers quoted in
toplevel splices.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module M = struct $(&lt;&lt;()&gt;&gt;) end;;
</code></pre></div>    </div>

    <p>results in an “index out of bounds” exception.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>static print x = ~Pervasives.print_endline x;;
$(print "one"; &lt;&lt;()&gt;&gt;);;
$(print "two"; &lt;&lt;()&gt;&gt;);;
</code></pre></div>    </div>

    <p>results in a segfault when put in a file and compiled with <code class="highlighter-rouge">ocamlc</code>.</p>
  </li>
  <li>
    <p>Lambda quoting now works, including path closures but without scope extrusion
detection. There are still a few bugs to fix in the REPL but the tests show
that all the other functions have been preserved. It is nice to see that
macros are quite orthogonal to other features.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: kayceesrk
    </div>
    <div class="furore_output"><ul>
  <li>Discussion with @stedolan about mergeable datatypes
    <ul>
      <li><em>if cons is the basis of functional data structures, what is the basis of mergeable funcational data structures?</em></li>
    </ul>
  </li>
  <li>Multicore OCaml
    <ul>
      <li>Submitted PR for OSX compilation: https://github.com/ocamllabs/ocaml-multicore/pull/103</li>
      <li>Working on fixing backtraces: https://github.com/ocamllabs/ocaml-multicore/issues/93</li>
      <li>Rubber ducking for memory model discussion with @stedolan.</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Maxime Lesourd
    </div>
    <div class="furore_output"><ul>
  <li>Spent most of my time figuring out the application process for my future PhD…</li>
  <li>Made some progress on the report, the introduction is almost done.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/gemmag.png" height="50px" /><br />
    
    Gemma Gordon
    </div>
    <div class="furore_output"><ul>
  <li>Continuing with OCL site: https://ocamllabs.github.io/</li>
  <li>Planning for new interns and visitors</li>
  <li>Catching up with Platform activity: odoc, odig, topkg</li>
  <li>Planning Compiler Hacking: https://ocamllabs.github.io/compiler-hacking/2017/01/24/february-compiler-hacking.html</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: g2p
    </div>
    <div class="furore_output"><p><strong>Mirage Storage</strong></p>

<ul>
  <li>Exercising the tree with synthetic data</li>
  <li>Node splitting (work in progress)</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dra27.png" height="50px" /><br />
    
    David Allsopp
    </div>
    <div class="furore_output"><p>(reduced week)</p>

<p><strong>OCaml 4.05</strong></p>
<ul>
  <li>Change Log Processor merge - failed to reach consensus. Shelved for now - will hopefully get turned into a Git merge driver instead.</li>
  <li>Various GPR reviews</li>
  <li>PR#7373, fixing a bug (of my own) in the FlexDLL bootstrap part of the build system. Tacking on some improvements to that which will feed into OPAM.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2017-01-09">
   09 January 2017 -  15 January 2017 (Week #3)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>iperf tests for tracing done, so I am summarizing findings from the tests</li>
      <li>Findings
        <ul>
          <li>the CPU utilization on the sender side reached 100%</li>
          <li>there were waiting (or blocking) periods on the sender side, they are not anticipated and occupy 50% of the total network processing time. (Due to thread scheduling?)</li>
          <li>the waiting periods always occurred during a “ring.write” phase</li>
          <li>The receiver side had sleeping periods which would correspond to the waiting periods above, so its CPU utilization was not so high.</li>
        </ul>
      </li>
      <li>I will need to specify what triggers the waiting periods.</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ul>
  <li>
    <p>Read literatures about model-based data compression. Found two algorights that might be apt to integrate into pih-store, Adaptive Piecewise Constant Approximation and Slider Filter. They are both online processing algorights. The idea is to cut the stream of data into appropriate segments, and fit the data in each segment to a specific linear function. Next week, may try to implement the first version of this.</p>
  </li>
  <li>
    <p>Continued learning about the design and structure of <code class="highlighter-rouge">packetdrill</code>. Still not clear about what shoud the statck test framwork should look like.</p>
  </li>
  <li>
    <p>Browsed some repos that use <code class="highlighter-rouge">topkg</code> from <a href="http://erratique.ch/software/topkg/doc/Topkg.html#menagerie">doc page</a>, finished learning how to use it.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ul>
  <li>Release Owl 0.2.0 to OPAM. The new release contains a lot of significant changes in the fundamental data structures in Owl. The number types and precision can be passed in as parameters in creation functions. Meanwhile, the interface remains compatible with the old <code class="highlighter-rouge">Dense.Real</code> and <code class="highlighter-rouge">Dense.Complex</code> modules, the latter two have default 64-bit precision.</li>
  <li>Write a tutorial on <a href="https://github.com/ryanrhymes/owl/wiki/Tutorial:-Basic-Data-Types">Basic Data Types in Owl</a></li>
  <li>Write a tutorial on <a href="https://github.com/ryanrhymes/owl/wiki/Tutorial:-Metric-Systems">Metric Systems in Owl</a></li>
  <li>Ben Caterall implemented a topic modelling algorithm (SparseLDA) using Owl, the pull request has been merged. This actual application of Owl will help in refining the interface of Owl. The code can be found <a href="https://github.com/ryanrhymes/owl/blob/master/lib/topic/owl_topic_lda.ml">here on github</a>.</li>
  <li>LDA code revealed a problem of Sparse module in Owl. The new implementation of Sparse module actually slows down the LDA algorithm a lot. The reason is current matrix storage format (CRS) is not ideal for random access of matrix elements (even tough it speed up many linear algebra operations), whereas my previous implementation uses a combination of hash table and CRS. This needs to be solved in future.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>
    <p>Work done on lambda quoting: combinators are in place, now Translquote has to
use them properly, i.e. the path arguments given to macros must become
<code class="highlighter-rouge">lambda</code> instances (and not <code class="highlighter-rouge">Longident.t</code> instances).</p>
  </li>
  <li>
    <p>After the last fixes on module type discovery, it seems that the compiler is
now fully (except for syntax) backward-compatible, in the sense that projects
that don’t use macros should have the same dependency tree in 4.04 and in
4.04+macros.</p>
  </li>
  <li>
    <p>My fork of Camlp4 now compiles on the macro switch.</p>
  </li>
  <li>
    <p>Some reflexion on Flick and looking at the code of motto.</p>
  </li>
  <li>
    <p>Flick: added a few elements in the DSL for channel declarations. For now,
channels are implemented as a <code class="highlighter-rouge">'i option ref * 'o option ref</code> in the
interpreter (i.e. a 1-capacity channel). Trying to replicate the program
(https://github.com/NaaS/motto/blob/master/tests/runtime/factorial.ml)[factorial.ml].</p>
  </li>
  <li>
    <p>Flick: add operations on channels, temporarily implement channels in terms of
two references on lists (for incoming and outgoing data) and write my first
“embedded” Flick program using the unstaged interpreter. This program doesn’t
use processes.</p>
  </li>
  <li>
    <p>Macros: Introduced a new constructor <code class="highlighter-rouge">Lescape</code> to denote when a piece of
lambda code should not be lifted when constructing a lambda quote. My current
problem is: how to construct Parsetree quotes and lambda quotes in the same
recursion without doing a lot of pairing/unpairing?</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: kayceesrk
    </div>
    <div class="furore_output"><ul>
  <li>Moving more issues to under Multicore issues. Organizing the issues under
projects.</li>
  <li>Chat with Daniel Hillestrom about progress on default handlers &amp; ICFP papers.</li>
  <li>Chat + planning with Gowtham for DaLi paper to ICFP/OOPSLA.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Maxime Lesourd
    </div>
    <div class="furore_output"><ul>
  <li>Started writing on the work I’ve done so far</li>
  <li>Finished setting up the blog after some troubles with mathjax over https</li>
  <li>Little progress on the Agda developments. Since we still don’t have a typed cps translation I’m going to spend less time on this.</li>
  <li>The plan for next week is to have a summary our attempts at “verifying” the cps translation either through a type system or a proof that it preserves semantics.
Then we can start asking for outside feedback and see what we can do.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/gemmag.png" height="50px" /><br />
    
    Gemma Gordon
    </div>
    <div class="furore_output"><ul>
  <li>Finished MirageOS feedback blog: http://reynard.io/2017/01/18/MirageIRCFeedback.html</li>
  <li>Ongoing report</li>
  <li>MirageOS press details</li>
  <li>New OCL site started: https://ocamllabs.github.io/</li>
  <li>Funding planning and allocation for next quarter</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: g2p
    </div>
    <div class="furore_output"><p><strong>Mirage Storage</strong></p>

<ul>
  <li>reloading support, testing and bug fixing</li>
  <li>indexing child and log structures from disk</li>
  <li>freeing replaced nodes from the space map</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dra27.png" height="50px" /><br />
    
    David Allsopp
    </div>
    <div class="furore_output"><p>(reduced week)</p>

<p><strong>OCaml 4.05</strong></p>
<ul>
  <li>Change Log Processor</li>
  <li>Various GPR reviews</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2017-01-02">
   02 January 2017 -  08 January 2017 (Week #2)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>finished preparing for performance bottleneck investigation.
        <ul>
          <li>finished learning and testing how to conduct tracing on Xen as well as on QEMU/KVM.</li>
          <li>finished building my MirageOS environment with the profiling support.</li>
        </ul>
      </li>
      <li>TCP-based iperf tracing
        <ul>
          <li>Found the vCPU utilization on the receiver side reached 100% though the sender side did not (~30%)</li>
          <li>also found it difficult to capture their behavior due to complicated ACK/SYN mechanisms in the TCP stack, so decided to use UDP.</li>
          <li>I will resume this after finishing the UDP-based iperf investigation</li>
        </ul>
      </li>
      <li>UDP-based iperf tracing
        <ul>
          <li>Finished coding UDP-based iperf based on TCP-based iperf</li>
          <li>Tracing in the MirageOS layer and the Xen layer by using the mirage-trace-viewer, xentop and xentrace commandes</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ul>
  <li>Split out Owl’s interface to Eigen3 as a standalone library: <a href="https://github.com/ryanrhymes/eigen">Github Repo</a></li>
  <li>Manage to learn how to interface between OCaml and C++ template library using Ctypes when interfacing to Eigen3.</li>
  <li>Submit Eigen OCaml library to OPAM on Friday and wait for approval now.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><p>Start working on “lambda quoting” again.</p>

<p>Added the <code class="highlighter-rouge">CamlinternalLambda</code> file, contains a <code class="highlighter-rouge">lambda</code> type that resembles
<code class="highlighter-rouge">Lambda.lambda</code>.</p>

<p>WARNING: Unlike with <code class="highlighter-rouge">CamlinternalAST</code> types, we do not necessarily want
<code class="highlighter-rouge">CamlinternalLambda.lambda</code> to be isomorphic to <code class="highlighter-rouge">Lambda.lambda</code>! E.g. the
<code class="highlighter-rouge">Ident.t</code> in <code class="highlighter-rouge">Lambda.lambda</code> is replaced with a simple string in
<code class="highlighter-rouge">CamlinternalLambda</code>. Instead, we will rely on a trivial function to transform a
<code class="highlighter-rouge">CamlinternalLambda.lambda</code> into a <code class="highlighter-rouge">Lambda.lambda</code>. This approach is simpler
than the one used in <code class="highlighter-rouge">CamlinternalAST</code>.</p>

<ul>
  <li>
    <p>Re-read Oleg’s paper about BER MetaOCaml to understand scope extrusion
detection checks.</p>

    <p>It has been decided that for now, we will leave
those checks in Parsetree quoting and not try to replicate them in Lambda
quoting.</p>
  </li>
  <li>
    <p>Flick: read stuff about ctypes, try to figure out how to represent processes
and command blocks.</p>
  </li>
  <li>
    <p>Add the <code class="highlighter-rouge">iterate</code> combinator (translation of Flick for loops) and start
building the blocks of processes.</p>
  </li>
  <li>
    <p>Compiler: add more lambda quoting combinators and move all combinators in a
Lambda module in <code class="highlighter-rouge">CamlinternalQuote</code>.</p>
  </li>
  <li>
    <p>Fix bug with phase of type extensions, improved the compilation of menhir (in
the sense that the first error occurs later in the build process). Menhir is
necessary to build motto.</p>
  </li>
  <li>
    <p>Now having a problem with module type discovery. Recall that, for
compatibility reasons, each module declared in a source file must be deeply
inspected in case it exports static values or macros. If it is not the case,
then it is safe not to include it in the static code. This way, we don’t add
useless static dependencies, so that dependency trees are backward-compatible.</p>
  </li>
  <li>
    <p>Here, some module types are not found for an unknown reason, entailing
irrelevant static dependencies and preventing the compilation of Menhir.</p>
  </li>
  <li>
    <p>Update other files to Parsetree quoting combinators being moved in a new
module.</p>
  </li>
  <li>
    <p>Keep working on interface discovery.</p>
  </li>
  <li>
    <p>Start working on using the lambda combinators to actually construct lambda
quotes in <code class="highlighter-rouge">Translquote</code>.</p>
  </li>
  <li>There is little documentation on the syntax and semantics of Flick. All that
is available is documentation about Crisp, and sometimes the designs of these
two languages diverge. For instance, in Crisp, two expressions at the same
level of indentation separated by a newline, e.g.:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>expr1
expr2
</code></pre></div>    </div>
    <p>are evaluated in parallel, whereas in Flick they are evaluated sequentially.</p>

    <p>After speaking with Nik, it would be useful to keep a kind of log of such
remarks that could be included in Flick’s documentation.</p>
  </li>
  <li>
    <p>FINALLY found the bug in deep interface inspection: in <code class="highlighter-rouge">Includemod</code>, the
environment used for building module coercions should know about the largest
signature (using <code class="highlighter-rouge">Env.add_signature</code>), but it wasn’t the case.</p>

    <p>Menhir now compiles on the macro switch, and so does motto.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: kayceesrk
    </div>
    <div class="furore_output"><ul>
  <li>Investigated the issue of slow compile times on 4.04.0. Reported the bug to mantis: https://caml.inria.fr/mantis/view.php?id=7456</li>
  <li>Planning for DaLi research paper. tl;dr is to add language level support for
mergeable datatypes. This builds on several pieces of work that has already
been done:
    <ul>
      <li><a href="https://github.com/kayceesrk/ezirmin">ezirmin</a></li>
      <li><a href="roscidus.com/blog/blog/2015/04/28/cuekeeper-gitting-things-done-in-the-browser/">Cuekeeper</a></li>
      <li><a href="https://github.com/gprano/diff-datatypes">diff-datatypes</a></li>
    </ul>
  </li>
  <li>Updated CV and website.
    <ul>
      <li>Updated the timeline :-) http://kcsrk.info/timeline.html</li>
    </ul>
  </li>
  <li>Submitted OCaml bug report for failing thread initialization:
https://caml.inria.fr/mantis/view.php?id=7452.
    <ul>
      <li>xleroy confirmed the bug and has proposed the fix:
https://github.com/ocaml/ocaml/pull/1009</li>
    </ul>
  </li>
  <li>Multicore planning. Have come up with a laundry list of features.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Maxime Lesourd
    </div>
    <div class="furore_output"><ul>
  <li>Set up a blog hosted on github pages. I plan to do a few posts about my attempts
at typing and/or verifying the CPS translation</li>
  <li>Made some progress on the Agda formalization of a lambda calculus with simple effects
    <ul>
      <li>The syntax and types are done</li>
      <li>The small step semantics using substitution is almost done</li>
      <li>The abstract machine needs some work</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/gemmag.png" height="50px" /><br />
    
    Gemma Gordon
    </div>
    <div class="furore_output"><ul>
  <li>Completed first draft of MirageOS Feedback blog</li>
  <li>Ongoing OCL Oct-Dec report</li>
  <li>Admin/management for new visitors</li>
  <li>Multicore planning with KC and Stephen - specifically repo organisation</li>
  <li>Working on MirageOS 3.0 posts/articles and press details</li>
  <li>Submit Slack for Education application</li>
  <li>Plan POPL liveblog</li>
  <li>Start work on OCL site with updated information</li>
  <li>Start planning for Maintainerati</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: g2p
    </div>
    <div class="furore_output"><p><strong>Mirage Storage</strong></p>

<ul>
  <li>build a free space map from a filesystem scan</li>
  <li>flush support</li>
  <li>upgrade to mirage 3 interfaces</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dra27.png" height="50px" /><br />
    
    David Allsopp
    </div>
    <div class="furore_output"><p>(reduced week)</p>

<p><strong>OCaml 4.05</strong></p>
<ul>
  <li>Change Log Processor</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-12-26">
   26 December 2016 -  01 January 2017 (Week #1)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>started preparing for performance bottleneck investigation.
        <ul>
          <li>finished building a QEMU/KVM hypervisor with a tracing feature by ftrace, and confirmed it can work.</li>
          <li>building my MirageOS environment with the profiling support.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Tools for network performance measurement
    <ul>
      <li>Finished making them available on the GitHub Website.</li>
      <li>(throughput) https://github.com/TImada/mirage_iperf</li>
      <li>(latency) https://github.com/TImada/mirage_pingpong</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ul>
  <li>Owl
    <ul>
      <li>Implement the module of sparse matrices.</li>
      <li>Implement the module of sparse n-dimensional array.</li>
      <li>Add the unit tests for Dense.Matrix, Dense.Ndarray, Sparse.Matrix, and Sparse.Ndarray modules using Alcotest.</li>
      <li>Add the performance tests for the aforementioned four modules.</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: kayceesrk
    </div>
    <div class="furore_output"><ul>
  <li>Ezirmin
    <ul>
      <li>Add <code class="highlighter-rouge">Sync</code> module that roughly mirrors <code class="highlighter-rouge">Irmin.Sync</code>. Discovered that <code class="highlighter-rouge">push</code>
is broken. This is tracked in the following issues:
    - https://github.com/mirage/ocaml-git/issues/139
    - https://github.com/mirage/irmin/issues/379</li>
      <li>Added support for history</li>
      <li>Adding features to write a blog post</li>
    </ul>
  </li>
  <li>Write and submit DaLi paper to <a href="https://github.com/gowthamk/snapl">SNAPL 2017</a></li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/gemmag.png" height="50px" /><br />
    
    Gemma Gordon
    </div>
    <div class="furore_output"><p><strong>General</strong></p>
<ul>
  <li>Catching up post-Christmas MANY EMAILS</li>
  <li>Exploring using furore for weekly worklogs with a view to everyone adding their weekly logs directly</li>
  <li>Paperwork and administration for visiting researchers to the lab</li>
  <li>Working on our 2016 catch up report: https://ocamllabs.github.io/furore/index.html</li>
  <li>Prepping Oct-Dec short report on activities</li>
  <li>Helping settle David Allsopp in the lab for his first day</li>
  <li>Writing up a blog about the MirageOS feedback</li>
  <li>Working on MirageOS logos</li>
</ul>

<p><strong>Projects</strong></p>
<ul>
  <li>Talked with Fred re Merlin progress:
    <ul>
      <li>stateless frontend: working on wrapper for Windows</li>
      <li>logging: working on currently</li>
      <li>parsing: late Jan, needs to talk with Francois first</li>
    </ul>
  </li>
  <li>Talked with Mark Shinwell (JS) about Merlin use at JS and issues they are facing</li>
  <li>Planning Romain’s next project with OCL</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: g2p
    </div>
    <div class="furore_output"><p><strong>Mirage Storage</strong></p>

<ul>
  <li>Start refactoring the way cache items are addressed.
This is a precondition for flush support.</li>
  <li>Document many design and implementation decisions.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dra27.png" height="50px" /><br />
    
    David Allsopp
    </div>
    <div class="furore_output"><p><strong>General</strong></p>
<ul>
  <li>Settling into the lab</li>
</ul>

<p><strong>OPAM-on-Windows</strong></p>
<ul>
  <li>MSR meeting. Immediate things to note:
    <ul>
      <li>Once rebase complete, liaise with @protz on package requirements to eliminate MSR internal OPAM scripts</li>
      <li>Andreas Hauptmann (fdopen) has stopped (is stopping) supporting his Windows opam-repository</li>
    </ul>
  </li>
</ul>

<p><strong>OCaml 4.05</strong></p>
<ul>
  <li>Reviewing “my” [GM]PRs and devising workplan ready for 1 Feb freeze</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-12-12">
   12 December 2016 -  18 December 2016 (Week #51)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Network performance evaluation
    <ul>
      <li>Finished it on MirageOS and Linux VMs.</li>
      <li>Observed network throughput on MirageOS VMs is worse than on Linux VMs. We will need to investigate why this happens.</li>
      <li>128-byte buffer size:
        <ul>
          <li>3MB/s on MirageOS-Xen, 24MB/s on MirageOS-virtio</li>
          <li>46MB/s on Linux-Xen,    38MB/s on Linux-virtio</li>
        </ul>
      </li>
      <li>1024-byte buffer size:
        <ul>
          <li>16MB/s on MirageOS-Xen, 38MB/s on MirageOS-virtio</li>
          <li>230MB/s on Linux-Xen,   295MB/s on Linux-virtio</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Also preparing for releasing my source codes on the Github.
    <ul>
      <li>this includes only source code sophistication for releasing, and will be finished in several days.</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/let-def.png" height="50px" /><br />
    
    Frédéric Bour
    </div>
    <div class="furore_output"><p>I haven’t progressed much on merlin this week, all my work was reason-related</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dra27.png" height="50px" /><br />
    
    David Allsopp
    </div>
    <div class="furore_output"><p><strong>OCaml</strong>
Various mildly time-consuming bits ‘n bobs:</p>
<ul>
  <li>Testsuite hardening to improve CI (GPR#974, GPR#975)</li>
  <li>CI tweaks (GPR#978, GPR#979)</li>
  <li>Windows asmrun build system merge test+review (GPR#941)</li>
  <li>GPR#980 test+review</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-12-05">
   05 December 2016 -  11 December 2016 (Week #50)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Preparing for the network performance evaluation -&gt; Finished automation framework implementation for the network performance evaluation.
    <ul>
      <li>The automation script I implemented worked fine. -&gt; Started building a MirageOS environment on another physical server @ packet.net.</li>
      <li>MirageOS/Solo5: mirage-dev</li>
      <li>OCaml version: 4.03.0, 4.04.0</li>
      <li>Hypervisor: Xen, KVM(virtio) -&gt; But now having a problem in executing MirageOS with OCaml v4.03.0 on Xen, so investigating how to solve it.</li>
      <li>This seems a bug in MirageOS. -&gt; Also started and finished the iperf network performance evaluation on Linux Virtual Machines.</li>
      <li>on the physical server above.</li>
      <li>Observed throughput: 38MB/s(128 bytes buffer length), 290MB/s(1024 bytes buffer length)</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><p>I have been working on the following things.</p>

<ol>
  <li>
    <p>I received a lot of feedback of Owl via github and emails from different people. Based on the feedback, I decided to restructure the Owl a bit by providing a more general matrix module using GADT. I already finished the initial version of Dense.Matrix module. In the near future, it will replace the current Dense.Real and Dense.Complex to provide matrix support for more types and precisions.</p>
  </li>
  <li>
    <p>I met Huawei people with Jon and presented Owl and Actor (the data processing system) I developed. They showed some interests which is a good sign (maybe:)</p>
  </li>
  <li>
    <p>For Actor, I have been collecting papers and doing literature survey to formulate the idea.</p>
  </li>
</ol>

<p>For next week, I will fly back to Helsinki so I cannot attend the meeting any more this year. I will see you guys next year in January :)</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/let-def.png" height="50px" /><br />
    
    Frédéric Bour
    </div>
    <div class="furore_output"><ul>
  <li>Distributed witnesses, https://github.com/let-def/distwit (with @samoht )
    <ul>
      <li>Solve the problem of marshalling exceptions / extensible type by externalizing the equality.</li>
    </ul>
  </li>
  <li>HyperLogLog, https://github.com/let-def/grenier/blob/master/hll/hll.mli
    <ul>
      <li>Cardinality estimation in constant space. I made a p-o-c implementation a while ago, now there is one user.</li>
      <li>I added serializability, improved memory representation and fixed a bug causing small biases in estimations</li>
    </ul>
  </li>
  <li>Macho support for Owee, https://github.com/let-def/owee, WIP
    <ul>
      <li>Loading Macho would be useful for supporting macOS binaries in spacetime.</li>
      <li>This would also a cheap lwt instrumentation tool for monitoring and backtraces. I discussed with @antron, maybe we will look at providing the necessary hooks in the future.</li>
    </ul>
  </li>
  <li>OCaml meeting (monday last week, some notes about stuff I want to look at)
    <ul>
      <li>Namespace: Didier Remy worried about specification of build (clumsy, not part of the langage)</li>
      <li>Interested by bytecode/native interoperability (mentioned by @dim, @stedolan)</li>
      <li>About release process: too much GPR, not enough testing &amp; code review, quality not satisfying</li>
    </ul>
  </li>
  <li>Eliom presentation (yesterday) &amp; talk with @drup
    <ul>
      <li>Seems feasible to add eliom support to Merlin.</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-11-28">
   28 November 2016 -  04 December 2016 (Week #49)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Preparing for the network performance evaluation
    <ul>
      <li>Implementing an automation framework of the network performance evaluation
        <ul>
          <li>This will be finished in several days</li>
          <li>Took long time to solve how to get logs of the MirageOS console (A logging scheme provided by Libvirt could not work, so I investigated and tried other logging frameworks)</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Making a slide deck to introduce my work at OCaml Labs to Hitachi Data systems guys
    <ul>
      <li>90% finished
        <ul>
          <li>I will be able to submit the slide to you for checking next week</li>
          <li>I will also check what kind of checking process in Hitachi for the slide is needed.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ul>
  <li>
    <p>talked with mort about the next project/direction to work on, for now, there are two possibilities: about PIH-store, develop a model-based compression engine inside of it, so that the data could take up much less storage space, yet with tolerant divergence from their real values; another one is about developing some temporal logic(together with buffer management) to extend the expressibility of packet capturing of network traffic</p>
  </li>
  <li>
    <p>talked with Magnus about work within MirageOS tcp/ip stack testing, at the moment there are testing about different parts of a protocol (say for TCP, we have tests for options and window management), Magnus is working on more different vnetif backends (to simulate different network traffic failure modes), I think there may be something missing in between, like tests when different parts of a protocol working together as a whole under various scenarios, or a test for layers in the stack working together with different packets traces, there are some parts in test_rfc5961.ml and test_iperf.ml, but I think there should be a easier way to express these and a higher level interface to create packets and traces instead of manually created cstruct(s), I’d like to develop something like `packetdrill’, probably together with a test environment and I’ve already started to look into this.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>I finished the first version of n-dimensional array in Owl, including some optimisation and the full documentation.</p>
  </li>
  <li>
    <p>I also wrote a tutorial on Ndarray which you can find here: https://github.com/ryanrhymes/owl/wiki/Tutorial:-N-Dimensional-Array</p>
  </li>
  <li>
    <p>I did some initial comparison to numpy and julia, it looks promising at the moment, and I will do more thorough evaluation next week.</p>
  </li>
  <li>
    <p>I also talked to kc and michel and discussed about further optimisations on owl, I will look into the directions they suggested in the following weeks.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><p><strong>Compiler</strong></p>

<ul>
  <li>The compiler “without placeholders” (and thus without useless static
dependencies) now broadly works, i.e. I was able to bootstrap (necessary
because adding an argument to one constructor of <code class="highlighter-rouge">Path.t</code> changed the cmi
format) and compile <code class="highlighter-rouge">re</code> (a regexp library that previously didn’t compile
because of dependency issues).</li>
  <li>Fixed some tests, including <code class="highlighter-rouge">warnings/w53.ml</code> and other easy things. My
changes appear to have broken recursive modules again (assertion failed in
<code class="highlighter-rouge">CamlinternalMod</code>).</li>
  <li>Fixed some tests involving recursives modules, but not all of them, by fixing
the <code class="highlighter-rouge">init_shape</code> function.</li>
  <li>Changed the lifting symbol to <code class="highlighter-rouge">~</code> (which unlike <code class="highlighter-rouge">^</code> should be non-breaking) in
order to break less Opam packages.</li>
  <li>Fixed various issues and bugs with the new system of coercion. It seems quite
robust, all tests are passed (except <code class="highlighter-rouge">no-alias-deps/aliases.cmo</code> but that’s
for a completely different reason, and was expected), and a lot of code from
Opam compiles fine.</li>
  <li>Fixed priority of “illegal quoting” errors over phase errors after drup’s
remarks</li>
</ul>

<p><strong>Examples using macros</strong></p>

<ul>
  <li>I try to make a fork of camlp4 compile again, but I encountered a bug that
wasn’t caught by the tests.</li>
  <li>A segfault occurs when running static code for the main source file of camlp4.
Investigating on the issue.</li>
  <li>Started to look at the Flick network DSL, and its OCaml implementation Motto,
and whether it can benefit from compile-time metaprogramming.</li>
  <li>Menhir is a dependency of motto, and doesn’t compile because of wrong
dependency tree — can be fixed by not translating type extensions into static
code</li>
  <li>Talked with Mort about networking examples. It would be nice to be able to
optimize a packet stream processor like POF or P4 using staging (maybe trying
to use or get inspiration from strymonas).</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-11-21">
   21 November 2016 -  27 November 2016 (Week #48)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Preparing for the network performance evaluation
    <ul>
      <li>finished the iperf modification, now iperf can be conducted between independent MirageOS VMs</li>
      <li>finished investigation of performance profiling schemes for MirageOS/Solo5</li>
      <li>tested mirage-trace-viewer and it worked fine</li>
      <li>investigated Xen and QEMU/KVM tracing facilities, and confirmed they can provide what I want to know
(I will try them later)
https://blog.xenproject.org/2012/09/27/tracing-with-xentrace-and-xenalyze/
http://www.linux-kvm.org/page/Perf_events
http://vmsplice.net/~stefan/stefanha-tracing-summit-2014.pdf</li>
    </ul>
  </li>
  <li>Started implementing an automation framework of the network performance evaluation
    <ul>
      <li>Completed rough implementation design and checking other software required</li>
      <li>I will implement it next week</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><p>Sorry for the late email this time, I was travelling on Friday. For the last week, I had been only focusing on the N-dimensional array in Owl.</p>

<ol>
  <li>
    <p>I implemented the first version of N-dimensional array, atop of which, I also implemented a N-dimensional view module which can pipeline some operations on the array to speed up the performance.</p>
  </li>
  <li>
    <p>I later find a better way to further optimise the performance of ndarray by using blas/lapack library. I am currently rewriting some code for better performance.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Remove “zero” placeholders for other-phase values in the lambda code. This
took me most of the week, as I had to phase information to <code class="highlighter-rouge">Path.t</code>, but also
to <code class="highlighter-rouge">module_coercion</code>s.
This modification should avoid over-approximating the static dependency tree
as is currently the case. Currently, every run-time dependency is a static
dependency. Since static dependencies must be compiled before there parent in
the tree can be compiled, this limitation would break most OCaml projects.
I expect this work to be finished, I’ll do the tests later tonight.</li>
  <li>Talked with Leo about linking and side effects. Maybe, at some point, it will
be necessary to ban the <code class="highlighter-rouge">static</code> keyword, unless the effect system is
integrated into OCaml soon enough.</li>
  <li>In addition to switching the quoting library to producing lambda code, it
would be good to detect scope extrusion. This would be done by passing
<code class="highlighter-rouge">CamlinternalQuote.Var.t</code> to macros, instead of the current <code class="highlighter-rouge">Longident.t loc</code>.</li>
  <li>Note for later: rename <code class="highlighter-rouge">CamlinternalQuote.Ident</code> to
<code class="highlighter-rouge">CamlinternalQuote.Global</code> and move <code class="highlighter-rouge">lfrommacro</code> to <code class="highlighter-rouge">Exp</code>.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-11-14">
   14 November 2016 -  20 November 2016 (Week #47)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Completed building my MirageOS/Solo5 environments in Japan
    <ul>
      <li>they are operating perfectly.</li>
    </ul>
  </li>
  <li>Investigating and trying to execute existing network programs on MirageOS</li>
  <li>found arp and iperf implementation, but found out they cannot use with the latest MirageOS branch (mirage-dev) due to rapidly changing MirageOS APIs</li>
  <li>modifying their source codes:
arp  : modification finished and worked correctly
iperf: under modification, network connection and data transfer were OK but a result printing part was wrong</li>
  <li>I will move to learning of performance profiling on MirageOS after finishing the iperf modification</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><p><em>Magnus is interesting in spending a day a week contributing to the MirageOS and DataBox efforts, specifically around the work he has already done on Jitsu, ARM and networking. He will spend Wednesdays in the Lab around the standup time and work with Qi on the new Alpine xen-arm-builder distribution, to get it up to speed. He is also working on mirage-vnetif and testing of the network stack.</em></p>

<ul>
  <li>
    <p>before Wednesday, run the system prepared for UCN final review to make sure it works, worked out the serial output from cubie so that without a vga screen we could still have a prompt to do the work, made SD card copies</p>
  </li>
  <li>
    <p>from Wednesday on, in Portugal, for the UCN final review, discovered that both the original card and the copy were corrupted because of some last second invalid writes crossing partition boundaries on the card, panicked, put up something mimicking the behaviour of PIH to make sure our partners’ demos could still run, since in the schedule, we wouldn’t demo anything, it’s just our collaborators using our platforms, then the review seemed going well…</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>I kept working on the P2P engine, and I implemented a distributed LDA atop of P2P engine in my data processing framework. I spent about two days in debugging it and finally managed to make it work.</p>
  </li>
  <li>
    <p>I had a meeting with Mort to refine our thinking on the data framework and identified a couple of interesting research questions: barrier control, and model consistency.</p>
  </li>
  <li>
    <p>I had a couple of meetings with those who are interested in owl and identified some potential directions: more advanced support for multi-dimensional array, and auto gradient derivation functions. I will focus on these two and try to get them ready by the end of this year.</p>
  </li>
  <li>
    <p>I wrote a separate post for using owl to manipulate matrices, in case you didn’t notice before, here is the link: https://github.com/ryanrhymes/owl/wiki/Manipulate-Matrices-in-Owl</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-11-07">
   07 November 2016 -  13 November 2016 (Week #46)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><ul>
  <li>Made a list of functionality in existing networking software and hardware for virtualised environments.
    <ul>
      <li>both Netmap and DPDK have a similar approach (software-based packet switching, userspace packet processing)</li>
      <li>using SR-IOV VFs is difficult to apply to some situations (for example, combined with DPDK on ARM)
So I will conduct performance evaluation of the current implementation to understand which part is a bottleneck</li>
    </ul>
  </li>
  <li>Preparing for the performance evaluation for the coming MirageOS v3 release
    <ul>
      <li>I will be engaged in network related topics.</li>
      <li>I have started building a MirageOS/Solo5 testbed (in Japan) to easily move to the actual evaluation in a local environment. I will learn and test Mirage-related operations on the testbed in advance</li>
    </ul>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ul>
  <li>
    <p>Finished porting to the Alpine system, now our PIH system is running on Alpine based cubeietruck full time. This involved putting the data persistence service and web interface for the end user into a debian-based domU.</p>
  </li>
  <li>
    <p>Figured out and fixed various bug (well, at least temporarily), mainly about PIH-bridge. This part works like a Network Address Translation device, which is doing traffic relays between clients and data holding unikernels. It will keep using up its own port numbers on its network interfaces if there is no proper “garbage collection” for the port numbers. This bit became a problem when our collaborators started testing there demos against our PIH, where lots of connections would be involved. Indeed, to make it more robust, we have to address this problem. For the time being, each translation rule has its own lifetime(5 min for now), and a queue is maintained in memory to hold these rules, once the number of rules reaches a threshold(30_000 for now), a function will be invoked to clear out all expired rules.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><p>For this week, I have been focusing on the development of the data processing framework. I have done the following things:</p>

<ol>
  <li>
    <p>I implemented a very simple DHT for the framework.</p>
  </li>
  <li>
    <p>I finished the first version of peer-to-peer model parallel engine, on top of which I also implemented a SGD algorithm.</p>
  </li>
</ol>

<p>Besides these, not much, the P2P model turned out to be much more complicated than the map reduce and parameter server models. Currently, I am focusing on the barrier control implementation in the framework.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><p><strong>Monday (2016-11-14)</strong></p>

<p>Specification of macro closures: the result of translating a macro into lambda
code should be:</p>
<ul>
  <li>if the target phase is 1: the code of the macro itself;</li>
  <li>if the target phase is 0: the closure, i.e. a block containing pointers to
the cross-stage, phase-0 identifiers used in the macro’s body.</li>
</ul>

<p>Unrelatedly: discovered a bug in our early form of CSP. This “weak” CSP
  enabled the programmer to quote non-global identifiers <em>if</em> the quote was
  “trapped” inside a top-level splice.
  The current implementation is faulty, as it allows to quote simple identifiers
  like <code class="highlighter-rouge">y</code>, but not compound paths like <code class="highlighter-rouge">M.y</code>, e.g. the following does not work:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # module M = struct let y = 42 end;;
  (seq
    (apply (field 1 (global Toploop!)) "M/1388"
      (pseudo //toplevel//(1):11-32 (makeblock 0 0)))
    (makearray[addr]))
  (apply (field 1 (global Toploop!)) "M/1388"
    (let (y/1389 =[int] 42)
      (pseudo //toplevel//(1):11-32 (makeblock 0 y/1389))))
  module M : sig val y : int end
  # let x = $(&lt;&lt;M.y&gt;&gt;);;
  &gt;&gt; Fatal error: No global path for identifier
  Fatal error: exception Misc.Fatal_error
</code></pre></div></div>

<p>Although this early form of CSP should be made redundant by path closures, I
  note this here for future reference.
  Improved printing of macros in signatures (<code class="highlighter-rouge">macro</code> instead of <code class="highlighter-rouge">static val</code>).</p>

<ul>
  <li>
    <p>Tuesday  <br />
Generation of <code class="highlighter-rouge">Lfrommacro</code> identifiers by macro expansion works. Now working
to make the type-checker handle <code class="highlighter-rouge">Lfrommacro</code> properly. Quite nicely, there is
no need to add a constructor to the <code class="highlighter-rouge">Path.t</code> type, since <code class="highlighter-rouge">Path.Pdot</code> already
has an integer field that can be used to represent closure fields.
Also, the compiler now shows the results of splicing when the options
<code class="highlighter-rouge">-dsource</code> or <code class="highlighter-rouge">-dparsetree</code> are set.</p>
  </li>
  <li>
    <p>Wednesday  <br />
Note: when modifying <code class="highlighter-rouge">CamlinternalQuote</code> it might be necessary to do <code class="highlighter-rouge">make
install</code> to have the changes taken into account in <code class="highlighter-rouge">Translquote</code>, since
<code class="highlighter-rouge">Translquote</code> loads <code class="highlighter-rouge">^CamlinternalQuote</code> from the standard path unless
otherwise specified.<br />
First examples with path closures working. Deactivated all warnings during
compilation of splices.<br />
Nested macros now work as well.</p>
  </li>
  <li>
    <p>Thursday</p>

    <p>Fix quoting of identifier so that globals are spliced as <code class="highlighter-rouge">Lglobal</code>. That
incidentally fix the issue with compound paths (see Monday).
Fix bug with macro numbering that would trigger segfaults when mixing macros
and the <code class="highlighter-rouge">include</code> keyword.
Replace previous warning deactivation with something cleaner.
Discovered a bug in the REPL that raises problems with values that exist in
two phases (i.e. currently, macros and modules that contain static values).
The current mechanism is:</p>
    <ol>
      <li>The static lambda is compiled and executed and its result is stored in the
global map of the REPL via <code class="highlighter-rouge">Toploop.set_value</code></li>
      <li>The run-time lambda of the same phrase is compiled and executed and its
result is stored in the same place, thus erasing the previous result.<br />
This is fine for entirely static or entirely run-time values, because they
are “associated” an identifier in one phase only. But it makes macros and
two-phase modules unusable.<br />
To fix that, it was sufficient to split the global map by phase (just as what
has been done with the symtable).<br />
I also ran the test suite and after a few minor fixes all tests are
successful. There is not yet a proper testing of path closures though.
Added a string component to <code class="highlighter-rouge">Lfrommacro</code> to print the name of field (along
with its position) in a macro closure, for debugging and clarity purposes. The
drawback is that it exposes internal names that depend on the implementation
and might confuse the user.</li>
    </ol>
  </li>
  <li>
    <p>Friday  <br />
Talked with Leo about future plans.<br />
Banned quoting from outside of macros and splices. As a direct consequence,
turned <code class="highlighter-rouge">Expr.of_*</code> functions into macros.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-10-31">
   31 October 2016 -  06 November 2016 (Week #45)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><p>What I have done in the recent weeks is as follows;</p>
<ul>
  <li>Finish reading (and testing codes in) Real World OCaml which will be related to my research topic</li>
  <li>Investigated how MirageOS boots up on Xen by reading the MirageOS and mini-os source codes, and understood how OCaml based modules and the mini-os part in MirageOS interact</li>
  <li>Started reading papers, documents, and source codes of Netmap and DPDK networking frameworks to consider how I can taking advantages of them in implementing my network acceleration feature on MirageOS</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>Working with sys-admin to set up the PIH service to our external collaborators.</p>
  </li>
  <li>
    <p>Bumping into some bug in the MirageOS TCP/IP stack, only until yesterday did I be able to locate it , will try to fix it and issue a PR on github later</p>
  </li>
  <li>
    <p>Continuing porting some services to Alpine based system. For now, the service accessible to the partners are running on a Debian based system. The binaries for unikernels were easy to deal with, but there are some parts need some dynamically linked libraries, I tried different ways: statically link these libraries; porting these parts together with the libraries; altering the unikernel’s implementation to get rid of these parts. For now, I’m settling with the last solution, but I think I would try the <code class="highlighter-rouge">porting with libraries</code> later, case the bug in “2” made me think that solution wouldn’t work initially. Since I’m not very familiar with the building tools (especially with the linking phase), I think the first solution will cause me more time.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>I realised the first version of Owl to OPAM with the help of others, also included it in the MirageOS documentation.</p>
  </li>
  <li>
    <p>I started shifting more efforts back to the distributed data processing framework. I rewrote the part of the data parallel and model parallel engine and wrapped them into a separate core module. On top of that, I implemented the one stochastic gradient decedent algorithm using model parallel engine.</p>
  </li>
  <li>
    <p>I have been investigating the Latent Dirichelet Analysis model and identified some potential research questions. Me and mort met the student (Ben Caterall) who will work with on his part III project. He will also contribute to Owl.</p>
  </li>
  <li>
    <p>I also implemented a simple LDA model using Owl, I hope Ben and me together can make a topic module for Owl.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>
    <dl>
      <dt>Monday (2016-11-07)</dt>
      <dd>Laptop still in repair, spent all day trying to get a desktop PC as a
replacement. Will use one of the lab shared computers from now on.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Tuesday</dt>
      <dd>Added a new <code class="highlighter-rouge">value_kind</code> for macros and made the typechecker tag macros with
it.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Wednesday</dt>
      <dd>Stopped keeping track of cross-stage identifiers in the typing environment.
Instead, iterate through the typed tree to find them in a expression when
needed.<br />
During the Compiler hacking event at Pembroke, paired with Maxime to work on
signatured opens (https://github.com/ocamllabs/compiler-hacking/wiki/Things-to-work-on#signatured-open-command); we’re about halfway through it.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Thursday</dt>
      <dd>Add support (parser and typechecker) for macros in signatures.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Friday</dt>
      <dd>Add a closure argument to macros, yet unused.</dd>
    </dl>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-10-24">
   24 October 2016 -  30 October 2016 (Week #44)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: seveneng
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>Measure the performance of PIH-gatekeeper(infrastructure within UCN), mainly the operation latency when serving clients’ requests. As there are different branches based on the validity of client certificate and/or the right to access a data holding unikernel, accordingly there are different scenarios where the PIH-gatekeeper need to be measured against.</p>
  </li>
  <li>
    <p>As mort successfully updated the dom0 OS from Debian-based to Alpine earlier last week, I started to port the system to the new platform. The out-of-box SDcard image has insufficient storage space assigned for dom0, I can’t install required tools/libraries in it, then I started to rebuild one image which has larger persistent storage space.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>I have optimised the performance of sparse complex matrix module. Many operations are much faster than before now. I think this module is mostly done.</p>
  </li>
  <li>
    <p>I have implemented a module for Fast Fourier Transforms with basic operations. I still need some time to finalise this module next week.</p>
  </li>
  <li>
    <p>I start writing up some documents to prepare for an opam release in the following weeks.</p>
  </li>
  <li>
    <p>I start allocating more time on the distributed data processing framework again this week. The progress on this was slow due to the distraction from Owl.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-10-17">
   17 October 2016 -  23 October 2016 (Week #43)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/camels.png" height="50px" /><br />
    
    Takayuki Imada
    </div>
    <div class="furore_output"><p>My research topic</p>
<ul>
  <li>Started learning OCaml, and finished installation of OCaml on my laptop.</li>
  <li>Completed the chapter 1 of Real World OCaml and now following the chapter 2</li>
  <li>Felt I need to have a flexible mind to understand the OCaml language expression.</li>
</ul>

<p>Others</p>
<ul>
  <li>Arrived at Cambridge 16th Oct.</li>
  <li>Found my long term flat and I will make a contract with a landload in this weekend.</li>
  <li>Still setting up IT services (e-mail address, lab network, printer/scanner).</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><ol>
  <li>
    <p>I have implemented complex number support in Owl. The Dense module now have two submodules: Real and Complex which support dense matrices of real number and complex number respectively.</p>
  </li>
  <li>
    <p>I also split the current Sparse module into two parts to support both real and complex sparse matrices. The real number is already supported but the complex number support in Sparse module is still missing.</p>
  </li>
  <li>
    <p>I removed the dependency on Ctypes.Foreign module in Owl and change completely to stub generation as suggested by Yallop. So the interface to GSL is supposed to be faster and type safer.</p>
  </li>
  <li>
    <p>I tested using functor to generalise some matrix operation, it worked fine but caused some performance penalty in certain operations that I am still trying to figure out the reason.</p>
  </li>
  <li>
    <p>I gave a pitch of my kvasir project last night in Petershouse last night, since it entered into Cambridge Enterprise Business Plan competition. However, I didn’t win the first prize in the end but nice experience and received a lot of publicity.</p>
  </li>
</ol>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-10-10">
   10 October 2016 -  16 October 2016 (Week #42)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/ryanrhymes.png" height="50px" /><br />
    
    Liang Wang
    </div>
    <div class="furore_output"><p>This week I have been working on the Plot module in Owl library by adding more basic plotting functions. Currently the Plot module supports many widely used plots. There are still many minor things in the module can be improved, but I will do that slowly in the future. I also wrote a tutorial on how to use the plot module and sent it to the ocamllabs mailing list.</p>

<p>Besides the Plot module, I am also focusing on the Stats module because GSL only provides very basic ones and there are many useful statistical functions are missing. I will implement most of them by myself in OCaml since I do not want to introduce too many dependency in the library. So far, I have implemented z-test, t-test, jb-test, chi2-test, and so on. Based on the feedback, it becomes clearer now that Owl will evolve into a numerical library for OCaml and Matrix, Maths, Stats, Regression, and Plot will be the core modules.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>
    <dl>
      <dt>Monday (2016-10-24)</dt>
      <dd>Still tracking that bug. The facts are the following: the program segfaults
when trying to dereference a <code class="highlighter-rouge">code_t*</code> pointer. The value of this pointer has
been set by the instruction <code class="highlighter-rouge">PUSHGETGLOBAL Pervasives, 48</code>. The fact that this
instruction was executed without segfault shows that accessing the field
labelled <code class="highlighter-rouge">Pervasives</code> (at that moment) is not an issue. What is an issue is
the value of field 48.
Ok, so the problem is that the slot 41, corresponding to <code class="highlighter-rouge">Pervasives</code>, is
erased. So an invariant has been violated.
I understood what the problem is, it’s actually very simple: I’ve tried to
execute bytecode (using <code class="highlighter-rouge">reify_bytecode</code>) with a fresh symtable. But that
resulted in the erasing of the compiler’s global data in
<code class="highlighter-rouge">Symtable.update_global_table</code>.  So it can be stated that: “to execute
bytecode directly, the symtable needs to be shared between the executer and
the executed”.
This bug was introduced by the change I made last Thursday, when I turned an
<code class="highlighter-rouge">init_static</code> in <code class="highlighter-rouge">Runstatic</code> into <code class="highlighter-rouge">init</code>. I did that for the sake of
bootstrapping, which otherwise would fail with an <code class="highlighter-rouge">Undefined global</code> error on
a built-in exception.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Tuesday</dt>
      <dd>The bug was fixed, along with a few others (see commits for details), and all
the tests are passed again.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Wednesday, Thursday, Friday</dt>
      <dd>Spent some time working on a staged regular expression matcher, to try macros
in a “real-world” situation. I simply staged a very simple, higher-order
representation of regular expressions with continuations. It allowed for some
compile-time optimizations like:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># static f = compile @@ (lit "John" +.+ lit "Kevin") *.* lit " likes apples";;
val f : (str -&gt; bool) expr =
&lt;&lt; fun cs_1  -&gt;
     (cs_1 = "John likes apples") || (cs_1 = "Kevin likes apples") &gt;&gt;
# static f = compile @@ maybe (lit "A") *.* lit "A" *.* lit "B";;
val f : (str -&gt; bool) expr =
&lt;&lt; fun cs_2  -&gt; (cs_2 = "AB") || (cs_2 = "AAB") &gt;&gt;
</code></pre></div>        </div>
      </dd>
    </dl>

    <p>The performance is unfortunately quite poor, due to the naiveness of the
initial, higher-order algorithm. In particular, the code size for concatenated
regexp increases exponentially with the number of regexps. But it has had the
merit to demonstrate the tractability of macros, since no problem related to
the macro system arose during development.</p>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-10-03">
   03 October 2016 -  09 October 2016 (Week #41)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><p>: I finished merging branch <code class="highlighter-rouge">4.04</code> into <code class="highlighter-rouge">macros</code>, but the repo is not functional
  yet: I get a segfault on <code class="highlighter-rouge">utils/clflags.ml</code> when bootstrapping. Strangely,
  printf-debugging pointed the segfault to happen on a call to <code class="highlighter-rouge">open_in_bin</code>
  inside <code class="highlighter-rouge">Bytelink.load_object</code>, although several successful calls have been
  made to <code class="highlighter-rouge">open_in_bin</code> during the execution. This suggests that the global data
  containing the Pervasives module has been somehow corrupt.</p>
<ul>
  <li>
    <dl>
      <dt>Tuesday</dt>
      <dd>A lot of time spent fighting with the built system and trying to find the
cause of my bug(s), without success.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Wednesday</dt>
      <dd>Since <code class="highlighter-rouge">macros</code> was based on <code class="highlighter-rouge">trunk</code>, I shouldn’t have used <code class="highlighter-rouge">merge</code> to rebase
it on <code class="highlighter-rouge">4.04</code>, since changes from <code class="highlighter-rouge">trunk</code> have been introduced on <code class="highlighter-rouge">4.04</code>.
In order to rebase macros on <code class="highlighter-rouge">4.04</code> without having to resolve conflicts on
each commit (which would be necessary to keep the commit history), I had to
squash all the macro-related commits into one commit, and cherry-pick that
commit onto <code class="highlighter-rouge">4.04</code>.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Thursday</dt>
      <dd>Conflicts solved and <code class="highlighter-rouge">.depend</code> files updated. <code class="highlighter-rouge">make coreall</code> works but the
segfault on <code class="highlighter-rouge">open_in_bin</code> is back. What’s more, when trying to compile some
dummy file with a static printf in it, the compiler segfaults in
<code class="highlighter-rouge">Symtable.update_global_data</code>, more specifically on the operation:
<code class="highlighter-rouge">glob.(slot) &lt;- transl_const cst</code>
where <code class="highlighter-rouge">glob</code> is <code class="highlighter-rouge">Meta.global_data ()</code>. I checked, it’s not an out-of-bounds
segfault.
Another segfault I’m currently tracking is on a call to
<code class="highlighter-rouge">Pervasives.output_string</code> (or <code class="highlighter-rouge">output_char</code>, one of the two).</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Friday</dt>
      <dd>Today, meeting with Mort and Anil to check the progress of macros. I need to
start writing down ideas of applications.
The runtime segfaults on the following line while executing the instruction
APPTERM2: <code class="highlighter-rouge">pc = Code_val(accu);</code>
Where <code class="highlighter-rouge">accu</code> has been set by the previous instruction: <code class="highlighter-rouge">PUSHGETGLOBALFIELD Pervasives, 48</code></dd>
    </dl>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-09-26">
   26 September 2016 -  02 October 2016 (Week #40)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Monday (2016-10-10)</li>
</ul>

<p>Added static modifiers where appropriate in reference files to fix three
  <code class="highlighter-rouge">parsing/</code> tests.
  More importantly, fixed <code class="highlighter-rouge">bytecomp/bytelink.ml</code> so that <code class="highlighter-rouge">std_exit.cmo</code> is
  linked last, which was not the case until then. Number of failed tests fell to
  20.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Summary:
    577 tests passed
      8 tests skipped
     20 tests failed
      2 unexpected errors
    607 tests considered
  List of failed tests:
      tests/typing-recmod/t19ok.ml
      tests/typing-implicit_unpack/implicit_unpack.ml.reference
      tests/basic-more/testrandom.ml
      tests/typing-recmod/t18ok.ml
      tests/no-alias-deps/aliases.ml.reference
      tests/typing-recmod/t10ok.ml
      tests/typing-modules/aliases.ml
      tests/typing-modules-bugs/pr6572_ok.ml
      tests/ppx-attributes/warning.ml
      tests/translprim/module_coercion.ml.reference
      tests/typing-recmod/t22ok.ml
      tests/no-alias-deps/aliases.cmo.reference
      tests/typing-gadts/pr6993_bad.ml
      tests/typing-poly/poly.ml
      tests/typing-modules-bugs/pr7182_ok.ml
      tests/typing-recmod/t03ok.ml
      tests/typing-recmod/t16ok.ml
      tests/lib-num
      tests/typing-recmod/t06ok.ml
      tests/match-exception/match_failure.ml
  List of unexpected errors:
      tests/lib-dynlink-bytecode
      tests/typing-fstclassmod
  List of skipped tests:
      tests/lib-dynlink-csharp
      tests/unwind
      tests/asmcomp/is_static_flambda
      tests/asmcomp/unrolling_flambda
      tests/lib-bigarray-2
</code></pre></div></div>

<p>Note: the current linker may load/link object files in a different order from
  that given on the command line. That should be avoided.</p>

<ul>
  <li>Tuesday</li>
</ul>

<p>Fix the linker to guarantee that object files are linked in the same order as
  specified on the command line (provided that the command-line arguments are
  topologically-sorted). Removed 2 errors.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Summary:
    579 tests passed
      8 tests skipped
     18 tests failed
      2 unexpected errors
    607 tests considered
  List of failed tests:
      tests/typing-recmod/t19ok.ml
      tests/typing-implicit_unpack/implicit_unpack.ml.reference
      tests/typing-recmod/t18ok.ml
      tests/no-alias-deps/aliases.ml.reference
      tests/typing-recmod/t10ok.ml
      tests/typing-modules/aliases.ml
      tests/typing-modules-bugs/pr6572_ok.ml
      tests/ppx-attributes/warning.ml
      tests/translprim/module_coercion.ml.reference
      tests/typing-recmod/t22ok.ml
      tests/no-alias-deps/aliases.cmo.reference
      tests/typing-gadts/pr6993_bad.ml
      tests/typing-poly/poly.ml
      tests/typing-modules-bugs/pr7182_ok.ml
      tests/typing-recmod/t03ok.ml
      tests/typing-recmod/t16ok.ml
      tests/typing-recmod/t06ok.ml
      tests/match-exception/match_failure.ml
  List of unexpected errors:
      tests/lib-dynlink-bytecode
      tests/typing-fstclassmod
  List of skipped tests:
      tests/lib-dynlink-csharp
      tests/unwind
      tests/asmcomp/is_static_flambda
      tests/asmcomp/unrolling_flambda
      tests/lib-bigarray-2
</code></pre></div></div>

<p>Fixed segfaults by lifting “CamlinternalMod” module name in <code class="highlighter-rouge">Translmod</code>, when
  appropriate. Only 6 failures left, even less than after the last testing
  session!</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Summary:
    592 tests passed
      8 tests skipped
      6 tests failed
      1 unexpected errors
    607 tests considered
  List of failed tests:
      tests/no-alias-deps/aliases.ml.reference
      tests/translprim/module_coercion.ml.reference
      tests/typing-recmod/t22ok.ml
      tests/no-alias-deps/aliases.cmo.reference
      tests/typing-poly/poly.ml
      tests/match-exception/match_failure.ml
  List of unexpected errors:
      tests/lib-dynlink-bytecode
  List of skipped tests:
      tests/lib-dynlink-csharp
      tests/unwind
      tests/asmcomp/is_static_flambda
      tests/asmcomp/unrolling_flambda
      tests/lib-bigarray-2
</code></pre></div></div>

<ul>
  <li>Wednesday</li>
</ul>

<p>Two other fixes (see commit logs):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Summary:
    594 tests passed
      8 tests skipped
      4 tests failed
      1 unexpected errors
    607 tests considered
  List of failed tests:
      tests/no-alias-deps/aliases.ml.reference
      tests/typing-recmod/t22ok.ml
      tests/no-alias-deps/aliases.cmo.reference
      tests/typing-poly/poly.ml
  List of unexpected errors:
      tests/lib-dynlink-bytecode
  List of skipped tests:
      tests/lib-dynlink-csharp
      tests/unwind
      tests/asmcomp/is_static_flambda
      tests/asmcomp/unrolling_flambda
      tests/lib-bigarray-2
</code></pre></div></div>

<p>With the help of Leo, I changed the placeholder for classes in static code to
  make <code class="highlighter-rouge">typing-recmod/t22ok.ml</code> work.</p>

<ul>
  <li>Thursday</li>
</ul>

<p>: Managed to fix all the tests (including the unexpected error), see commit
  logs.
  Started rebasing on branch <code class="highlighter-rouge">4.04</code>.</p>

<ul>
  <li>Friday</li>
</ul>

<p>: Mark Shinwell remarked that in the case of a branch with so many changes on
  it, doing a rebase is extremely long: conflicts need to be resolved on a
  per-commit basis, and almost all commits trigger conflicts. So I decided to
  rather do a merge.
  The merge is at about 30% progress (building and testing not included).</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-09-19">
   19 September 2016 -  25 September 2016 (Week #39)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>
    <dl>
      <dt>Monday (2016-10-03)</dt>
      <dd>With the help of Leo White, I realised that <code class="highlighter-rouge">Int_base</code> (see prev. worklog)
should not be set to 0 in the static code. So I just removed the related
condition in <code class="highlighter-rouge">Translmod</code>, and this segfault went away. But doing that incurred
new dependencies from files such as <code class="highlighter-rouge">utils/numbers.ml</code> to stdlib <code class="highlighter-rouge">cmm</code> files.
I moved all <code class="highlighter-rouge">stdlib/*.cmm</code> files to <code class="highlighter-rouge">boot/</code> (as was already done with
<code class="highlighter-rouge">stdlib/*.cmi</code>) and it seems to do the trick for now.
Today’s issue arose in the following code:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(* this introduces a module `T` in scope *)
include Identifiable.Make (struct (* ... *) end)
module Pair = Identifiable.Make (Identifiable.Pair (T) (T))
</code></pre></div>        </div>
        <p>Causing a <code class="highlighter-rouge">Bytegen.comp_expr: var T_1712</code> error.</p>
      </dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Tuesday</dt>
      <dd>Removing another <code class="highlighter-rouge">target_phase</code> condition just made it work. It’s quite
surprising and I am afraid that something might break if I keep applying fixes
that I don’t understand, but I’m too lazy to take it seriously right now.
But bad news: <code class="highlighter-rouge">ocamldoc/odoc_args.ml</code> uses first-class modules in way that
makes the current way of translating modules go wrong:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module Html =
(val
 (
 match !Odoc_args.current_generator with
   None -&gt; (module Odoc_html.Generator : Odoc_html.Html_generator)
 | Some (Odoc_gen.Html m) -&gt; m
 | _ -&gt;
     failwith
       "A non-html generator is already set. Cannot install the Todo-list html generator"
) : Odoc_html.Html_generator)
;;
</code></pre></div>        </div>
        <p>Simply translating module unpacking (<code class="highlighter-rouge">Tmod_unpack</code>) fixed that one, but it
will probably break in certain cases.
Warning: phase not taken into account when typing recursive modules in
<code class="highlighter-rouge">Typemod</code>. (later note: fixed)</p>
      </dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Wednesday</dt>
      <dd>Basic examples with static modules work. And even static functors! How amazing
is that!
I implemented phase checks for modules, i.e. the compiler raises an error if
a module identifier of the wrong phase is used in a functor application or a
binding.</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Thursday</dt>
      <dd>Today, I removed all the debug messages printed by the compiler and started to
write a test suite for macros. For now it only contains very basic checks
related to static values, quoting, splicing and static modules.
I also removed the <code class="highlighter-rouge">Translstatic</code> module, which had become unnecessery, and
moved its contents to <code class="highlighter-rouge">Translmod</code>. Doing that enabled me to make the REPL
compile static modules (prior to that, they were just ignored).
To-do list for the next days:</dd>
    </dl>
    <ul>
      <li>make <code class="highlighter-rouge">ocamlopt</code> work again by fixing
<code class="highlighter-rouge">Translmod.transl_store_implementation</code>.</li>
      <li>run all tests on both compilers to see if anything is broken.</li>
      <li>rebase <code class="highlighter-rouge">macros</code> on <code class="highlighter-rouge">trunk</code> (ouuuuch) and run the tests again.</li>
    </ul>
  </li>
  <li>
    <dl>
      <dt>Friday</dt>
      <dd>Remark: one day, I will have to harmonize the behaviour of bytecode and native
linker. This is not needed for macros to work, but is necessary to have a
consistent user interface between the two compilers.
<code class="highlighter-rouge">ocamlopt</code> compiles again. Testing time!
A bunch of tests failed this time:
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Summary:
551 tests passed
  8 tests skipped
 46 tests failed
  2 unexpected errors
607 tests considered
List of failed tests:
  tests/typing-recmod/t19ok.ml
  tests/typing-implicit_unpack/implicit_unpack.ml.reference
  tests/parsing/shortcut_ext_attr.ml.reference
  tests/lib-format/pr6824.ml
  tests/lib-format/tformat.ml
  tests/lib-printf/pr6534.ml
  tests/lib-printf/tprintf.ml
  tests/lib-printf/pr6938.ml
  tests/basic-more/testrandom.ml
  tests/basic-more/tbuffer.ml
  tests/basic-more/opaque_prim.ml
  tests/utils/test_strongly_connected_components.ml
  tests/typing-recmod/t18ok.ml
  tests/basic-more/morematch.ml
  tests/no-alias-deps/aliases.ml.reference
  tests/typing-recmod/t10ok.ml
  tests/lib-scanf
  tests/typing-modules/aliases.ml
  tests/typing-modules-bugs/pr6572_ok.ml
  tests/ppx-attributes/warning.ml
  tests/basic-more/tformat.ml
  tests/basic-more/if_in_if.ml
  tests/lib-threads/torture.ml
  tests/translprim/module_coercion.ml.reference
  tests/basic-more/pr2719.ml
  tests/basic-more/top_level_patterns.ml
  tests/typing-recmod/t22ok.ml
  tests/no-alias-deps/aliases.cmo.reference
  tests/typing-gadts/pr6993_bad.ml
  tests/typing-poly/poly.ml
  tests/parsing/extensions.ml.reference
  tests/parsing/attributes.ml.reference
  tests/lib-str/t01.ml
  tests/basic-more/sequential_and_or.ml
  tests/typing-modules-bugs/pr7182_ok.ml
  tests/misc/weaktest.ml
  tests/typing-recmod/t03ok.ml
  tests/basic-more/function_in_ref.ml
  tests/typing-recmod/t16ok.ml
  tests/basic-more/bounds.ml
  tests/lib-num
  tests/utils/edit_distance.ml
  tests/basic-more/tprintf.ml
  tests/basic-more/pr6216.ml
  tests/typing-recmod/t06ok.ml
  tests/match-exception/match_failure.ml
List of unexpected errors:
  tests/lib-dynlink-bytecode
  tests/typing-fstclassmod
List of skipped tests:
  tests/lib-dynlink-csharp
  tests/unwind
  tests/asmcomp/is_static_flambda
  tests/asmcomp/unrolling_flambda
  tests/lib-bigarray-2
</code></pre></div>        </div>
        <p>In comparison, results on the 5th of July were:</p>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Summary:
  590 tests passed
    8 tests skipped
    9 tests failed
    1 unexpected errors
  608 tests considered
List of failed tests:
  tests/typing-recmod/t18ok.ml
  tests/typing-recmod/t10ok.ml
  tests/typing-modules-bugs/pr6572_ok.ml
  tests/ppx-attributes/warning.ml
  tests/typing-recmod/t22ok.ml
  tests/typing-poly/poly.ml
  tests/typing-modules-bugs/pr7182_ok.ml
  tests/typing-recmod/t03ok.ml
  tests/typing-recmod/t06ok.ml
List of unexpected errors:
  tests/typing-fstclassmod
List of skipped tests:
  tests/lib-dynlink-csharp
  tests/unwind
  tests/asmcomp/is_static_flambda
  tests/asmcomp/unrolling_flambda
  tests/lib-bigarray-2
</code></pre></div>        </div>
        <p>By taking the diff, I can see that no errors fixed themselves, and which ones
are new:</p>
        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>8a9,22
&gt;     tests/typing-recmod/t19ok.ml
&gt;     tests/typing-gadts/pr7230.ml
&gt;     tests/typing-implicit_unpack/implicit_unpack.ml.reference
&gt;     tests/parsing/shortcut_ext_attr.ml.reference
&gt;     tests/lib-format/pr6824.ml
&gt;     tests/lib-format/tformat.ml
&gt;     tests/lib-printf/pr6534.ml
&gt;     tests/lib-printf/tprintf.ml
&gt;     tests/lib-printf/pr6938.ml
&gt;     tests/basic-more/testrandom.ml
&gt;     tests/basic-more/tbuffer.ml
&gt;     tests/basic-more/opaque_prim.ml
&gt;     tests/utils/test_strongly_connected_components.ml
9a24,25
&gt;     tests/basic-more/morematch.ml
&gt;     tests/no-alias-deps/aliases.ml.reference
10a27,28
&gt;     tests/lib-scanf
&gt;     tests/typing-modules/aliases.ml
12a31,38
&gt;     tests/basic-more/tformat.ml
&gt;     tests/tool-ocaml/t330-compact-2.ml
&gt;     tests/basic-more/if_in_if.ml
&gt;     tests/lib-threads/torture.ml
&gt;     tests/translprim/module_coercion.ml.reference
&gt;     tests/basic-more/pr2719.ml
&gt;     tests/basic-more/top_level_patterns.ml
&gt;     tests/typing-extensions/extensions.ml.reference
13a40,41
&gt;     tests/no-alias-deps/aliases.cmo.reference
&gt;     tests/typing-gadts/pr6993_bad.ml
14a43,47
&gt;     tests/parsing/extensions.ml.reference
&gt;     tests/parsing/attributes.ml.reference
&gt;     tests/lib-str/t01.ml
&gt;     tests/typing-warnings/application.ml.reference
&gt;     tests/basic-more/sequential_and_or.ml
15a49
&gt;     tests/misc/weaktest.ml
16a51,59
&gt;     tests/typing-gadts/pr5906.ml
&gt;     tests/basic-more/function_in_ref.ml
&gt;     tests/typing-recmod/t16ok.ml
&gt;     tests/basic-more/bounds.ml
&gt;     tests/lib-num
&gt;     tests/typing-gadts/pr7269.ml
&gt;     tests/utils/edit_distance.ml
&gt;     tests/basic-more/tprintf.ml
&gt;     tests/basic-more/pr6216.ml
17a61
&gt;     tests/match-exception/match_failure.ml
19a64
&gt;     tests/lib-dynlink-bytecode
</code></pre></div>        </div>
        <p>Several failures seem due to include path problems, causing <code class="highlighter-rouge">Unbound modules</code>
errors.</p>
      </dd>
    </dl>
  </li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-08-08">
   08 August 2016 -  14 August 2016 (Week #33)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I continue to work on a prototype of ocaml-git. I just finished the decoder for the IDX file, I will try the implementation next week.</li>
  <li>I continue to document MrMime - Richard showed me some emails when MrMime fails. These emails are wrong and the thing is, if you use MrMime by the best effort way, you can extract all information from the email, so MrMime can parse these email by the hard way - not the simple way.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-08-01">
   01 August 2016 -  07 August 2016 (Week #32)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I continue to document MrMime, you can see the documentation at this link: http://oklm-wsh.github.io/MrMime/ (not very exciting)</li>
  <li>I started a new prototype for ocaml-git, the name is sirodepac, you can see the reopository at this link: https://github.com/dinosaure/sirodepac
For the sirodepac, the goal is to created a non-blocking encoder/decoder. So, Thomas follows the project and it’s works for the moment despite some little bugs.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Monday + Tuesday</strong></p>

<p>Rewrote the lexer and parser to be able to understand more about the input, i.e. whether it’s a positional arg, flag or optional arg etc. This also requires that the parser have access to the commands and their arguments so that required some more rewriting. This information can then be used for both predictions and syntax highlighting. It’s also easier to extend.
Parsing optional arguments is tricky because it means the next positional value might actually be their value. Quite a few edge cases, and haven’t added support for a few widely used conventions like using – to denote that the next value is a positional value, or using = when specifying values.</p>

<p><strong>Wednesday</strong></p>

<p>Working on making predictions better using the additional information. Quite a lot of cases. Just doing the basic ones for now. Flags only need their name predicted. Non flags need their name predicted but can also predict their value. Positional arguments can be predicted based on their index.
Not working yet for optional arguments. Also not working for some other edge cases.</p>

<p><strong>Thursday</strong></p>

<p>Added syntax highlighting by traversing the raw input and the syntax tree together.
Some more work on prediction. Refactoring and separating out modules.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-07-25">
   25 July 2016 -  31 July 2016 (Week #31)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/engil.png" height="50px" /><br />
    
    Enguerrand Decorne
    </div>
    <div class="furore_output"><ul>
  <li>Worked on the ocaml-tls binding: Fixed a few memory leaks problems. Tried to run spacetime against the binding, to no avail Tried to run landmarks against the binding: not much success too.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I talked with Christophe about the optimization, I have not yet advised Jeremy about the benchmark but I keep this thing when Jeremy will try to optimize Decompress</li>
  <li>I move Decompress to topkg because Anil wanted a Dockerfile inside the project</li>
  <li>Richard retested MrMime and I fixed some bugs and optimized some computations. Now, we compute 180 mails per second and MrMime fails on 500 emails with 815 000 emails! So it’s not bad, we will fix the rest with Richard when he comes back</li>
  <li>I fixed a little bug for Qi Li on the Xen librairies</li>
  <li>I continue to document MrMime</li>
  <li>And I looked inside ocaml-git to understand where I need to start but I does not do revelant something for the moment.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Wednesday</strong></p>

<p>Current state of the shell:</p>
<ul>
  <li>Commands work, but I haven’t actually added most of the commands. E.g. connecting doesn’t actually work as it’s asynchronous, so using Lwt throughout is top priority.</li>
  <li>Tab completion doesn’t really work. It kind of did at one point, but I’ve changed quite a lot of stuff since then. Should be fairly easy to get working again though.</li>
  <li>Parsing the input works mostly fine, handles quotes / strings, allows escaping etc.</li>
  <li>Notty interface now works, which means I can continue using Notty, but it isn’t perfect.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-07-18">
   18 July 2016 -  24 July 2016 (Week #30)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: jdjakub
    </div>
    <div class="furore_output"><p>Discussed with KC some interesting ideas I’ve been having related to making GUI programming less painful. Possible direction for Part II research. I need to investigate the existing literature and write up a brief explanation of what I’m looking at. Also, in the context of this summer, need to see if I can integrate it with the work I’m doing at Docker / OCaml Labs. KC suggested working on same as Ciaran: build 9P client, to develop these principles and test them.</p>

<p>Summary:</p>

<ul>
  <li>Motivation comes from building games, where the rule is reinventing the GUI wheel every time.</li>
  <li>GUIs are systems of lots of interacting components. Difficult to code and organise.</li>
  <li>Immediately tied up with graphics and layout: naive, ad-hoc solutions based on fixed, pixel coords and sizes commonplace.</li>
  <li>Want graphical systems that automatically adjust to different constraints eg window shape/size.</li>
  <li>iOS uses Cassowary constraint solver… potentially solved problem, but need expertise in linear prog / optimisation to implement…</li>
  <li>The other broad problem area: specifying interaction.</li>
  <li>Java Swing approach: add event listeners to everything. Asynchronous imperative programming: not scalable with complexity.</li>
  <li>Reinventing for Game N: take similar approach. Sick of it</li>
  <li>My ideas: related to DSLs, formal languages, grammars, parsers.</li>
  <li>Fundamental hypothesis: Parser generators convert language specs into parsers - state machines which accept / reject (and, structure) linear sequences of tokens. Usually thought of as text, but my insight is this: the inputs (mouse, keyboard) that the user submits to an interface are a just such a linear sequence; simply in the time dimension. What if: when we write horrible imperative Java Swing ActionListeners, we are actually painstakingly and unwittingly constructing, by hand, the state machine for a parser of the UI’s language? And if so, could it be easier to write UIs as formal grammars of some sort, and then automatically generate the parser (application code) from them? Just as you would enlighten a newbie to CS who has not heard of grammars and who writes all their parsing code in an ad-hoc manner. And furthermore - how useful would it be to view ALL programs (of the sort that depends on inputs from the outside world) as parsers - the language-vs-machine view; elaborate on the fact that, when we slog through the imperative state code for Turing machines, we’re dually writing parsers for their [recursively enumerable] languages.</li>
  <li>In one sense, a command-line utility that adds numbers together doesn’t just do that - rather, it takes a bunch of characters from the command line and spits out more characters, which happen to correspond to numbers in a particular way.</li>
  <li>Final facet: the principle of compositionality and abstraction. Context-free grammars; their benefits and limitations. Embedding semantics / context-sensitivity into grammars. CFGs let you elaborate in a top-down manner.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I just improved (again!) the interface of MrMime:
    <ul>
      <li>So the design of the API is approved by Daniel and I wait a feedback of Richard to know if we will release a new version or not</li>
    </ul>
  </li>
  <li>After, I did go to docker to meet Thomas and prepare a TODO list for ocaml-git. Now, I have a clear idea to what I need to do for this project.</li>
</ul>

<p>Not a big week so, but a good week to clarify some points about MrMime and ocaml-git.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Monday</strong></p>
<ul>
  <li>Rewrote a lot of the code as I was using quite a bit of mutable state. For example, using an array to store the current input. Now storing it as two int lists (ints as characters are unicode), the first representing the input before the cursor (stored in reverse), and the second representing the input after the cursor. Lots of other changes as well.
<strong>Tuesday</strong></li>
  <li>Some more rewriting. Code a lot terser and almost no mutability.</li>
  <li>Managed to get Notty working with scrolling etc by disabling canonical mode myself then passing the input from stdin into the notty module to filter escape sequences. A bit of a hack but it means I can use notty and have proper scrolling etc, and don’t have to redraw everything each time.</li>
  <li>Still a few things that are only half working. For example tab completion is kind of there but not actually ‘wired up’.
<strong>Wednesday</strong></li>
  <li>Not much to log, just starting to get the shell working with ocaml-9p, rather than just the couple of small examples I’ve been using so far.</li>
  <li>I’ve written the shell to be synchronous at the moment, which won’t work well with things like ocaml-9p, so I’m going to change it to use Lwt throughout.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-07-11">
   11 July 2016 -  17 July 2016 (Week #29)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>Automatic perforation is coming to the point where it could be ready for more users. I have slowly started to focus on providing a good user interface.</p>

<p>This week I ran my auto perforation tool on two sets of inputs for kmeans with the goal of showing that results from a run of the automatic perforation program can be used to approximate further inputs. That is, running kmeans with the automatic perforator gives you a result on how to best perforate your loops. Using this result with future data sets previously unseen gives you just as good results. For this experiment I trained the perforation using 10 inputs with 100,000 points. I then ran the resulting perforated program on 10 other inputs of 1,000,000 points and achieved very similar results (a 5x speedup with only a 10% loss in accuracy).</p>

<p>This week I’ve written a blog post about the troubles with writing generic approximate computing frameworks (found at: http://phfilip.com/the-difficulty-in-a-general-approximate-computing-framework.html)</p>

<p>This week I’ve also discussed with KC at lengths about a use-case of approximate computing. The general idea is to add approximate reasoning to programs which work over distributed key-value stores. Programs in this domain are usually already written to handle consistency anomalies. The addition of a dynamic system to track and handle the levels of approximation could be a good fit for my approximate computing work.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Macro support has been implemented in <code class="highlighter-rouge">ocamlc.opt</code> (bytecode compiler running on the native back-end), after various bug corrections. The execution of macros is as follows:
    <ol>
      <li>static code is compiled to bytecode and written to a temporary <code class="highlighter-rouge">.cmm</code> file</li>
      <li>that <code class="highlighter-rouge">.cmm</code> file is linked with its dependencies to make a temporary bytecode executable</li>
      <li>using <code class="highlighter-rouge">Sys.command</code>, <code class="highlighter-rouge">ocamlrun</code> is called on that file. The executable runs and writes the top-level splices to the file passed as a command-line
argument.</li>
      <li>The untyped parse trees are unmarshalled and spliced into the run-time code.</li>
    </ol>
  </li>
  <li>I pushed further the idea of HTML templates using the Markup.ml library. An example of a code that can be run (and that includes run-time strings in the template) is:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>open Markup
open Htmltemplate
let par =
  Printf.printf "Please enter a string: ";
  read_line ()
let () =
  $(template [Lit {|
    <span class="cp">&lt;!DOCTYPE html&gt;</span>
    <span class="nt">&lt;html&gt;</span>
      <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Some page<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;/head&gt;</span>
      <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>Some page<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>|}; Var <span class="nt">&lt;</span><span class="err">&lt;</span><span class="na">par</span><span class="nt">&gt;</span>&gt;; Lit {|<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
  |} ])
    |&gt; of_list |&gt; pretty_print |&gt; write_html |&gt; to_string
    |&gt; print_endline
</code></pre></div></div>

<p>The HTML tree is constructed statically, entailing no parsing costs at run-time. The next step is to convert the Markup.ml tree to a TyXML tree to have the typechecker enforce the validity of the HTML tree.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I finished fixing some bugs with Decompress, so we have a stable version after many optimization. As I explained, we don’t have a big improvement on the performance but Jeremy will take the relay</li>
  <li>After Richard focused me on a performance problem in MrMime, so I fixed the bug. It’s a technical point bug I wait Richard to launch an other test</li>
  <li>I started a little library to see any differences between an email before and after decoding/encoding, I think, I will finish this mini-project this week-end - and may be it’s a useful project for irmin</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Monday</strong></p>
<ul>
  <li>Experimenting with Notty to make the shell interactive, for things like tab completion.</li>
  <li>Notty doesn’t seem to support applications that aren’t full screen terminal when capturing key presses. For example utop allows tab completion while still being scrollable. Notty generally seems to be more for graphics. lambda-term should support this but also has a lot of stuff that I probably don’t need.</li>
  <li>Notty also doesn’t appear to clean up the terminal after ctrl + c, leaves mouse interaction on etc. And ctrl c can’t be intercepted.</li>
  <li>Actually it does allow capturing scrolling events and mouse position, so maybe I can implement scrolling manually instead, but not ideal.</li>
</ul>

<p><strong>Tuesday</strong></p>
<ul>
  <li>Would be good to handle unterminated input - e.g. if string doesn’t have a closing quote or if the line ends in a backslash then go to the next line. Requires some support in the lexer.</li>
  <li>Notty assumes unicode throughout so I will too. Supporting unicode by storing input as an int list and using that when lexing and printing back to the terminal.</li>
  <li>I’m currently lexing and parsing the entire input on each keystroke, as I need to know the meaning of the input to be able to do prediction. Not really ideal but usually commands are so short that it might not matter. I might have a go at making it more efficient anyway.</li>
</ul>

<p><strong>Wednesday</strong></p>
<ul>
  <li>I spent today trying to figure out a better way of supporting completions by trying to only lex the part of the input that changes and swap out the affected tokens. I got it sort of working but it was buggy and had lots of mutable state so I gave up on it, at least for now.</li>
</ul>

<p><strong>Thursday</strong></p>
<ul>
  <li>Notty will only capture input events when using a single screen (not scrollable) terminal application, so using print doesn’t work as it’s quickly overwritten when redrawing the screen. This would be fine as I could just return a string and handle printing elsewhere, but as a lot of the stuff with ocaml-9p is asynchronous I might want to print during executing the command to let the user know what’s happening. Which means I might have to take another look at Lambda-term.</li>
  <li>In terms of supporting completions, I had a look at Cmdliner as it parses the arguments and automatically checks if an arg is a file or an int etc, which would be useful information for prediction. Would be cool to be able to pass the Cmdliner data to this shell and have prediction done automatically, but unfortunately not really possible.</li>
  <li>I can add a small amount of stuff to add prediction to an existing program that uses Cmdliner (or something else). Basically just two functions (one for named args and one for positional args) that map a prefix to a list of possibilities.</li>
</ul>

<p><strong>Friday</strong></p>
<ul>
  <li>Got most things working together today, commands now work properly. Still haven’t actually got the actual interface working yet though…</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-07-04">
   04 July 2016 -  10 July 2016 (Week #28)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>This week I split my time under two projects: the continuing of my auto perforator and the datakit project.</p>

<p>The auto perforator is coming along very nicely. There is now a hill climbing algorithm built in which will explore the perforation state space. I have the system working under 3 domains: swaptions, ray tracer, and kmeans. I will give a talk about the system next Tuesday.</p>

<p>The datakit project is under KC’s guidance. The idea is to use datakit to power a distributed key-value store. The implementation would be a domain for testing systems which adapt to byzantine errors by changing the strength of their reads into the database.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Automatic loading implemented in the bytecode linker, both at compile-time and for linking of runtime code. Automatic here means that the needed .cmm, .cmo and .cma file are automatically searched for in the include path. It’s mainly for convenience reasons now, if it is too big a change it can be suppressed later.</li>
  <li><code class="highlighter-rouge">ocamlc.opt</code> should work very soon, I just need to make phase-1 built-in exceptions work.</li>
  <li>I experimented a bit, trying to use macros with the Markup.ml library (with HTML templates in mind). The very simple following code runs and prints “&lt;p&gt;lol&lt;/p&gt;”:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>static identity str =
  let open ^Markup in
  let open ^Pervasives in
  let res =
    (string str |&gt; parse_html |&gt; signals |&gt; write_html |&gt; to_string) in
  Expr.of_string res

let () = print_endline $(identity "&lt;p&gt;lol")
</code></pre></div></div>

<p>I will try writing more useful macros ASAP.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: jdjakub
    </div>
    <div class="furore_output"><p><strong>Monday</strong></p>

<p>Setting up Angstrom: I follow the readme instructions, ignoring the initial opam install as the package is not yet released.</p>

<p><code class="highlighter-rouge">opam pin add -n angstrom .
  opam install --deps-only angstrom</code></p>

<p>Which goes fine.</p>

<p>I want to use vim to explore the source but it complains that it doesn’t have alcotest, so I fix that:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> opam install alcotest
  [...]
  Building fmt.0.8.0:
  ocaml pkg/pkg.ml build --pinned false --with-base-unix true --with-cmdliner true
  Installing fmt.0.8.0.
  [ERROR] 'pinned' has type bool, but a env element of type string was expected`
</code></pre></div></div>

<p>Messing around with versions settles on alcotest.0.4.1 as one that works. I run the config and make commands without incident.</p>

<p>Spent the rest of the day surveying Angstrom, OCaml internals and practising more Vim.</p>

<p><strong>Tuesday</strong></p>

<p>Wrote simple test parser for balanced parentheses using Angstrom. Went surprisingly smoothly - my previous experimentation with parser combinators and monads earlier in the year has clearly paid off.</p>

<p>Wrote initial version of ANSIparse - first test results in out-of-memory from infinite loop somewhere. !!</p>

<p>Rewrote the grammar and the code, still need to rewrite testing code and do the tests.</p>

<p><strong>Wednesday</strong></p>

<p>Continued rewrite a few times. Became apparent during testing that I had misread the format codes and fixed that. Got a working parser from string -&gt; (style list * string) list, eg</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`"Hello, \x1b[1mBrave, \x1b[4;31mNew \x1b[0mWorld!"`

to

`[ ( []                    , "Hello, " );
  ( [Bold]                , "Brave, " );
  ( [Underline; Fore Red] , "New "    );
  ( [Reset]               , "World!"  ); ]`
</code></pre></div></div>

<p>Now I need to work on the structuring, i.e. converting to HTML. There is already implicit structure; (styles, str) :: rest applies styles in order to str AND, implicitly, rest. However, the presence of Reset turns things off. I wonder how useful it would be to try and extract some tree structure from this data by e.g. matching styles and Resets.</p>

<p><strong>Thursday</strong></p>

<p>Today, worked on making the parser incremental, in that it works a line at a time given its intended use. Ran into some more unpleasant infinite-loop bugs; one of which was of the form</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`Items --&gt; Item*
Item --&gt; Escape | Text
Text --&gt; char*`
</code></pre></div></div>

<p>So we can derive “HELLO” as</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Items --&gt; Item* --&gt; Text* --&gt; Text --&gt; "HELLO", or
Items --&gt; Item* --&gt; Text* --&gt; Text Text* --&gt; "HELLO" "", or "HELLO" "" "", etc... and never finishing
</code></pre></div></div>

<p>So I had to add lookahead whereby the parser for Text fails if it will read the empty string (because it’s at the end of input).</p>

<p><strong>Friday</strong></p>

<p>Split into concrete (text) and abstract (tree) modules for later use. Had a look at TyXml.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I push my big change to MrMime, so Richard launched a test with ~18 000 emails and all emails are ok (we catch no error).</li>
  <li>We find a performance problem (with the multipart and the quoted-printable encoding) but it’s a specific problem (so when I have a time, I will fix this problem)</li>
  <li>But, overall, MrMime is more faster (it’s the result of improvement of internal buffer)</li>
  <li>After, I worked on Decompress and I defunctorized the project, I optimized the translation between op-code and character and I avoided some closures allocations, but, with all this point, with Jeremy, we can’t notice any imrpovement :disappointed:</li>
  <li>So, I will try a deforestation of Decompress and we will see if we have a good result</li>
  <li>For the hackaton, I worked on Decompress, but, as I said, no big change and just some experimentals modifications.</li>
  <li>For the next week, I will start to fix some bug in ocaml-git as Richard advised me. Voilà!</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Monday</strong></p>

<p>IOCaml on 4.03</p>
<ul>
  <li>Requires ctyptes. ctypes fails due to requiring libffi. There is a message about needing to brew install libffi but I missed it at first. Installed after that.</li>
  <li>Forked and cloned iocaml, followed wiki post on iocaml github to create kernelspec for jupyter:
<code class="highlighter-rouge">{
"display_name": "OCaml",
"language": "ocaml",
"argv": [
  "&lt;full path to iocaml&gt;/iocaml.top",
  "-object-info",
  "-completion",
  "-connection-file",
  "{connection_file}"
]
}</code><br />
Had to use the full path to get it to work.  <br />
Then run “jupyter kernelspec install –name iocaml-kernel <code class="highlighter-rouge">pwd</code>” inside that directory.<br />
And run<br />
  <code class="highlighter-rouge">DYLD_LIBRARY_PATH= pwd :$DYLD_LIBRARY_PATH &amp;&amp; eval opam config env &amp;&amp; jupyter notebook --Session.key= --notebook-dir=notebooks</code><br />
to get jupyter running (again inside the iocaml directory).</li>
  <li>Actually just <code class="highlighter-rouge">jupyter notebook --Session.key=</code> seems to work fine?</li>
  <li>Hydrogen connects directly to the kernels without going through Jupyter (even though it uses jupyter for the kernelspecs). In atom, trying to use Hydrogen with ocaml code causes it to hang. Running just <code class="highlighter-rouge">jupyter notebook without --Session.key=</code> causes the server to repeatedly connect and disconnect to the kernel, so this is probably the issue.</li>
</ul>

<p><strong>Tuesday</strong></p>

<p>IOCaml</p>
<ul>
  <li>Used ‘apm develop hydrogen’ to clone hydrogen as a development plugin, so I can modify it. To use my version I have to start atom with atom –dev.</li>
  <li>Trying to figure out where exactly in Hydrogen the key stuff is set. Adding lots of console.log statements.</li>
  <li>The connection to a kernel is created in kernel.coffee, which uses the config passed in by kernel-manager.coffee.</li>
  <li>KernelManager either generates the config or loads it from ./hydrogen/connection.json in the atom project directory. So you can set key: “” and signature_scheme: “” in the json file, but then every option must be set. This means ports aren’t found automatically etc, they must be set manually.</li>
  <li>For now, I’m just hardcoding in the key and scheme into kernel.coffee.</li>
  <li>Trying to do more with iocaml. Need to #require various things, but #use “topfind” doesn’t work. That can be fixed by adding a .iocamlinit file to ~, starting it with
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`let () =
  try Topdirs.dir_directory (Sys.getenv "OCAML_TOPLEVEL_PATH")
  with Not_found -&gt; ()
;;
#use "topfind";;
#thread;;
#require "iocaml-kernel.notebook";;
</code></pre></div>    </div>
  </li>
  <li>The actual ocamlinit doesn’t need the above to come before adding other things like #use “topfind”. Shouldn’t IOCaml load the toplevel path itself?
(Some of Monday and Tuesday is summarised in a gist on github)</li>
</ul>

<p><strong>Wednesday</strong></p>
<ul>
  <li>Trying to figure out how iocaml displays data but I can’t figure it out. There’s something about adjustable type definitions.</li>
  <li>Trying to figure out how hmac stuff works in zmq, but I don’t think I’m going to get anywhere. IOCaml is difficult to figure out. Sockets are opened in sockets.ml, messages are sent and received though message.ml only?</li>
  <li>Following datakit quick start. Managed to get the basics working.</li>
  <li>Trying to get ocaml 9p working, currently a dependency bug.</li>
  <li>Can’t connect to the docker container yet, trying to figure out.</li>
</ul>

<p><strong>Thursday</strong></p>

<p>Datakit</p>
<ul>
  <li>I can run it in docker but I can’t actually connect to it. Trying to connect ocaml-9p just eventually results in a timeout.</li>
  <li>Got it connecting, had to expose the port to the host using -p 5640:5640.
(Most of Thursday was spent reading about docker networking or looking at datakit or ocaml-9p, so not much to log.)</li>
</ul>

<p><strong>Friday</strong></p>

<p>Shell for ocaml-9p or datakit</p>
<ul>
  <li>Writing a quick lexer and parser for the commands so that things like strings and ids are actually handled properly.</li>
  <li>Works pretty well, quite resilient. Parses input into an AST of commands with their arguments. Also handles strings properly, plus relatively easy to extend.</li>
  <li>I’m writing this in such a way that tab completion should be fairly easy to add.</li>
  <li>To interact with Datakit I will need to install it properly rather than through docker so I can use it in my program. But currently it won’t make - getting error during linking, undefined symbols for x86_64.</li>
  <li>Experimenting with Notty to make the shell interactive, for things like tab completion.</li>
  <li>Notty doesn’t seem to support applications that aren’t full screen terminal when capturing key presses. For example utop allows tab completion while still being scrollable. Notty generally seems to be more for graphics. lambda-term should support this but looks more low level and depends on Camomile.</li>
  <li>Notty also doesn’t appear to clean up the terminal after ctrl + c, leaves mouse interaction on etc. And ctrl c can’t be intercepted.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-06-27">
   27 June 2016 -  03 July 2016 (Week #27)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>This week I have generalized the perforation system to the point where I was able to take an off-the-shelf ocaml implementation of kmeans clustering and run it through the perforation system. The program was able to produce nice, readable results for different configurations [attached image]. However when more than 2 loops are perforated, the data starts becoming very hard to visualize. The system is really smooth but it’s still lacking: I had to turn one use of List.iter into a for loop. However, I have created a plan to perforate recursive functions which will allow the system to work on programs which don’t use for loops.</p>

<p>This week I also worked with the reagents library for ocaml-multicore. In the beginning of the week I parallelized an existing ray tracer written in OCaml. (The ray tracer also is a good candidate for perforation.) Further, KC and I have discussed working on a lock-free hash table implementation to use in the Hack type checker (written in OCaml). Currently hack use a C hash table implementation strapped on the to OCaml code. Writing a competitive implementation in OCaml would be a great way to show of ocaml-multicore.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Testing of rebased branch and subsequent corrections finished. The remaining test failures are (all but one) due to lack of support for recursive modules, except for an unexpectedly long type error, probably due to the twofold compilation.</li>
  <li>Alain Frisch’s native toplevel (<code class="highlighter-rouge">ocamlnat</code>) now compiles again, but has no macro support.</li>
  <li>Macro support was added to <code class="highlighter-rouge">ocamlopt</code> (careful, not <code class="highlighter-rouge">ocamlc.opt</code>). There was almost nothing to do since <code class="highlighter-rouge">ocamlopt</code> is a bytecode program.</li>
  <li>Installing packages with <code class="highlighter-rouge">opam</code> is possible again but the fix is very ugly (<code class="highlighter-rouge">ln -s ocamlc ocamlc.opt</code>). <code class="highlighter-rouge">opam</code> doesn’t seem to support bytecode-only installations.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: jdjakub
    </div>
    <div class="furore_output"><p><strong>Tuesday</strong></p>

<p>Tried installing OPAM and OCaml etc on Windows:</p>

<p>Follow the instructions on https://github.com/protz/ocaml-installer/wiki, up to the final Sanity Check
<code class="highlighter-rouge">Env var OCAMLLIB</code> exists, so I “clean it up” - removing it, I assume, from my environment. However I can only do so for my current cmd session using SET, and it doesn’t show up in systemwide environment variables so I assume it must be part of my user account’s environment. Unfortunately I cannot change or access those; “edit environment variables for your account” shows no dialog, nothing (this has been a problem on my machine for a while, but I’ve never needed the feature till now). So I decide to unset OCAMLLIB in my Cygwin terminal, as it will at least persist for that session. I get to running opam install depext-cygwinports, but I get errors and unfortunately the others are not able to fix.</p>

<p>Later I open Cygwin terminal again. I forget to source .bashrc and run opam install depext-cygwinports and to my surprise it works. I then opam install zarith batteries stdint etc. and it also works, although I have to use the “fake install” steps in the Troubleshooting section. I then look at https://github.com/realworldocaml/book/wiki/Installation-Instructions and opam install core utop, but I get:
  <code class="highlighter-rouge">[ERROR] core is not available because your system doesn't comply with os != "win32" &amp; ocaml-version = "4.02.3"</code></p>

<p>I also read at the beginning of the article that Core is unsupported on Windows. So maybe I will have to go through the hassle of installing an Ubuntu VM after all, since my existing one is at home on my external hard drive.</p>

<p>opam install’d core utop on Ubuntu. Initially had some issues with an older version but fixed them.</p>

<p><strong>Wednesday</strong></p>

<p>Begin by installing the next list of packages. During the process I get one</p>

<p><code class="highlighter-rouge">Building conf-zlib.1:
   pkg-config zlib
 [ERROR] The compilation of conf-zlib.1 failed</code></p>

<p>I later end up with detailed error descriptions (as well as one for cohttp) giving “Out of space” errors - I’d given it the default size of 8GB, and I’d used a fixed-size virtual disk so it can’t just be resized!</p>

<p>After wasting time grappling with VirtualBox to accept my new 512GB dynamic vdi, I now need to expand the partition or something. But I know nothing about it, and it involves boot-level munging of irreversible operations and I am seriously not interested in reinstalling the VM along with all the OCaml/OPAM stuff that took absolutely ages yesterday (and will probably take even longer, given my new VDI is dynamic). Instead I resolve to see what I can do in OCaml without zlib or cohttp installed in OPAM.</p>

<p>Not a great deal, it seems. For when I type in utop to my terminal (now using the old 8GB disk) all I get is
Fatal error: unknown C primitive <code class="highlighter-rouge">unix_has_symlink</code></p>

<p>I would be surprised if this had anything to do with the lack of zlib or cohttp, since they were opam packages presumably for development. I google a bit, find similar looking errors, and do eval <code class="highlighter-rouge">opam config env</code>, try again and this time I’m finally in.</p>

<p>And it only took two whole days!</p>

<p>Later, we get to Docker, where I continue getting through Real World OCaml and receive a licence key for Windows 10 Professional - thanks Dr. Titmus.</p>

<p><strong>Thursday</strong></p>

<p>I begin the day by attempting the Windows 10 Pro upgrade three times in a row, using the official channels. Frustratingly, each time, after the restart, it appears as if nothing has happened. I’m still on Home. Maybe it would be better after all to just get a computer at Docker and the CL.</p>

<p>I talk to Graham Titmus and download the Win10 Multiple Editions ISO from DreamSpark. It tells me I’ll need to burn it to a boot disk, so I go back to Titmus’ office to ask - he isn’t there, so after a while I go back and e-mail him, continuing with R.W.O in the meantime.</p>

<p>The time comes to run corebuild on my VM. I do so, and I get the “out of memory” error, because I’m still using the 8GB disk. I thought I could get away with it.</p>

<p>Titmus arrives and gives me a disk. I burn the ISO to the disk. I go through the setup process and, after many loooong waits eventually come to the final setup screen. “You have chosen to: install Windows Home” nope, I never chose anything like that, or even had any options. Google told me that the Multiple Editions version contained both Home AND Professional - and that it would ask me which one I would like.</p>

<p><code class="highlighter-rouge">C:\WINDOWS\system32&gt;dism /Get-WimInfo /WimFile:D:\sources\install.wim
  Deployment Image Servicing and Management tool
  Version: 10.0.10586.0</code></p>

<p><code class="highlighter-rouge">Details for image : D:\sources\install.wim</code></p>

<p><code class="highlighter-rouge">Index : 1
  Name : Windows 10 Pro
  Description : Windows 10 Pro
  Size : 14,516,205,352 bytes</code></p>

<p><code class="highlighter-rouge">Index : 2
  Name : Windows 10 Home
  Description : Windows 10 Home
  Size : 14,431,121,717 bytes</code></p>

<p>The operation completed successfully.</p>

<p>So it does contain Pro. Why didn’t it acknowledge this? Perhaps I need to boot from the disc instead.</p>

<p>I can’t seem to boot from it. Instead I enter in the new code to System &gt; Activation. This time it takes a LOT longer … but ultimately ends up just like the other attempts.</p>

<p>I give up. I’ll use my VM.</p>

<p>Increased primary partition, shouldn’t have any (of the same) problems now.</p>

<p><code class="highlighter-rouge">$ eval </code>opam config env<code class="highlighter-rouge">
  $ opam install -y async yojson core_extended core_bench cohttp async_graphics cryptokit menhir merlin</code></p>

<p><code class="highlighter-rouge">...</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> `#=== ERROR while installing conf-zlib.1 =======================================#
  # opam-version 1.2.0
  # os           linux
  # command      pkg-config zlib
  # path         /home/jdj27/.opam/4.03.0/build/conf-zlib.1
  # compiler     4.03.0
  # exit-code    1
  # env-file     /home/jdj27/.opam/4.03.0/build/conf-zlib.1/conf-zlib-5816-d2c37b.env
  # stdout-file  /home/jdj27/.opam/4.03.0/build/conf-zlib.1/conf-zlib-5816-d2c37b.out
  # stderr-file  /home/jdj27/.opam/4.03.0/build/conf-zlib.1/conf-zlib-5816-d2c37b.err`
</code></pre></div></div>

<p>Googled, performed some magic, got it to work.</p>

<p>Continuing with RWO, this time much faster and more productively since I now have something to type into.</p>

<p><strong>Friday</strong></p>

<p>Just did RWO today, finally, was nice - got through several chapters, now up to chapter 8 (Imperative programming).</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I defunctorized Decompress, so the API is more simply and I won 2 Mb/s for the inflate but I losted 2 Mb/s for the deflate</li>
  <li>Now Decompress uses memcpy function instead memmove (standard function used by OCaml), it’s a technical aspect but a big technical point about the portability on Decompress (on Xen architecture specifically). So, I talk about that with Jeremy and we think we have no problem and may be it’s a good change to improve the performance of Decompress</li>
  <li>I used a project from LexiFy, landmarks (Thomas advised me to use that), and Spacetime from Mark to find the bottleneck in Decompress and I found this Friday. I have an idea to optimize Decompress (again and again) but I think, we found the the big problem about the performance in Decompress (and it converges with Jeremy’s idea)</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/generic-headshot.png" height="50px" /><br />
    
    TODO: ciaran16
    </div>
    <div class="furore_output"><p><strong>Monday</strong></p>
<ul>
  <li>Background reading. Refreshing how git works in more detail. Looking at irmin, datakit.</li>
  <li>Reading articles from Thomas Leonard’s blog.</li>
</ul>

<p><strong>Tuesday</strong></p>

<p>Setting up opam / ocaml.</p>
<ul>
  <li>Installing opam using brew. Following RWO setup guide. Installing core, utop etc via opam. Configuring utop to #require core packages.</li>
  <li>Setting up vim. Installing merlin and creating .merlin file. Installing ocp-indent-vim. Sorting out .vimrc. Installed syntastic, setup to use merlin.</li>
</ul>

<p>Docker tutorial</p>
<ul>
  <li>Installed docker. Followed the basic docker tutorial - the basics of images, containers etc.</li>
</ul>

<p>OCaml</p>
<ul>
  <li>Reading some more of Thomas Leonard’s articles. Reading  RWO.</li>
</ul>

<p><strong>Wednesday</strong></p>
<ul>
  <li>Finished reading most of part 1 of RWO. Read some of the later chapters as well, but part 1 covers most of the language features.</li>
</ul>

<p>Dependencies and utop</p>
<ul>
  <li>utop doesn’t load the init file (.ocamlinit) when loading an ml file from the command line. Using #use loads the init file.</li>
  <li>I expected utop to work with a file that used other modules in the same directory, but it doesn’t. It is possible by building first using ocamlbuild and then using #load_rec on the cmo file. Useful for interacting / quickly testing a bit of code split across multiple files.</li>
</ul>

<p>Lexing and Parsing</p>
<ul>
  <li>Read the chapter about parsing in RWO and managed to get the very basics working.</li>
</ul>

<p><strong>Thursday</strong></p>

<p>IOCaml and Hydrogen</p>
<ul>
  <li>Setting up Hydrogen for Atom as explained on the website. Working with python (although requires running atom via terminal), need to get working with IOCaml. Installed OCaml support for atom using apm install language-ocaml.</li>
  <li>Doesn’t work on 4.03 for some reason, requires &lt; 4.03.0. Switching to 4.02.3. (Later on - after updating opam I can install on 4.03)</li>
  <li>Trying to opam install IOCaml fails as it depends on gmp, which it isn’t installing automatically. Installed manually with homebrew.</li>
  <li>Still failing as ctypes won’t compile - The compilation of ctypes failed at “make XEN=disable libffi.config”.</li>
  <li>Installed libffi manually using brew. opam install IOCaml now works.</li>
  <li>IOCaml doesn’t work. Jupyter says 0 active kernels. Hydrogen works with python even if jupyter notebook isn’t running, so I guess it’s using its own instance. IOCaml works by itself from the command line, just not sure how to link with Jupyter or Hydrogen.</li>
  <li>
    <p>Jupyter doesn’t have a kernel spec for IOCaml. I have no idea how to add one.</p>
  </li>
  <li>There are pages on the IOCaml wiki for adding the kernel spec, but I can’t figure it out.</li>
</ul>

<p>Lexing and Parsing</p>
<ul>
  <li>Messing around with ocamllex and Menhir in the afternoon, trying to create a simple template language.</li>
  <li>Decided to try sedlex instead as it supports unicode.</li>
  <li>sedlex won’t install for 4.03. Latest version does work on 4.03 but opam isn’t seeing it. Trying to figure out how to refresh the repo.</li>
  <li>Can’t find much (Later on - did I actually try opam update?). The latest version listed by opam is 1.99.2, but the opam repository online gives 1.99.3.</li>
  <li>Adding PKG sedlex to my .merlin file causes ‘Error while running external preprocessor’. Can’t figure out what exactly is the problem for now, something to do with the fact sedlex uses ppx?</li>
</ul>

<p>Sedlex</p>
<ul>
  <li>Just trying to lex for now, the template language consists of text and logic parts which need to be lexed differently, so the lexer needs some contextual infomation.</li>
  <li>Managed to get lexing working pretty well for the template language, by using some mutable state. Don’t think there is any other way really.</li>
</ul>

<p><strong>Friday</strong></p>

<p>Sedlex</p>
<ul>
  <li>I’m currently testing my lexer by building, then going into utop and doing</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    #directory "_build";;
    #load_rec "_build/lexer.cmo";;
</code></pre></div></div>

<p>This lets me quickly test it with different strings without having to rebuild, and lets me see the returned list of tokens.</p>

<ul>
  <li>
    <p>Sedlex doesn’t let you define regexps using
  <code class="highlighter-rouge">let lid =
    let lid1 = [%sedlex.regexp? R] in
    [%sedlex.regexp lid1]
as they will be unbound. Currently doing:
  let lid1 = [%sedlex.regexp? R]
  let lid = [%sedlex.regexp lid1]</code>
They have their own scope anyway.</p>
  </li>
  <li>
    <p>Does defining a function within a function that is called often have a significant performance penalty to defining it outside the function?</p>
  </li>
</ul>

<p><strong>Weekend</strong></p>
<ul>
  <li>Messed around with lexing a bit more, got parsing working as well using Menhir. Requires using MenhirLib.Convert API as Menhir is made to work with ocamllex.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-06-20">
   20 June 2016 -  26 June 2016 (Week #26)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>Our perforation system is ready for initial testing so this week I’ve mostly worked on running experiments. I translated a swaptions program into OCaml. A lot of time was spent fixing bugs in the translation but once everything was set up I ran it through our loop perforation system and have some initial results.</p>

<p>We haven’t quite reproduced the results from the C perforation system in the paper I’m referring to. They show results where a 5x speedup is achieved with only a 1% loss in accuracy. Our system can only produce a 1.2x speedup while losing 5% accuracy. We can get to 2x speedup but we have to sacrifice 40% accuracy. We do not perform the same state space searching as the paper version does so when that is all set up we may be able to reproduce the results.</p>

<p>I’m confident that once we perform the same sort of searches as the C version we can gain similar speedups. This will be an immediate goal of next week.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Vast changes in the way dependencies of static code are loaded: although <code class="highlighter-rouge">.cmm</code> files are still automatically loaded from the include path (<code class="highlighter-rouge">-I</code>), <code class="highlighter-rouge">.cmo</code> and <code class="highlighter-rouge">.cma</code> dependencies of static code must now be specified using the <code class="highlighter-rouge">-m</code> command-line flag. Since dependencies of dependencies must be specified as well, it can lead to rather large compilation commands. This is intended as a backward-compatibility feature, since hopefully dependency management in OCaml should soon evolve to loading <code class="highlighter-rouge">.cmo</code> files from path during linking, if Leo White’s proposal for that gets accepted.</li>
</ul>

<p>The changes made to dependency loading involved a bootstrap of the compiler, and a modification of the stdlib makefile (and 3 days of very painful debugging because of a line that hadn’t been removed).</p>
<ul>
  <li>A rebase on <code class="highlighter-rouge">trunk</code> was performed to avoind falling behind, but some work is necessary to get the native compiler running again (without trying to make it support macros yet) before the testsuite can be run.</li>
  <li>Static and runtime declarations can now be interleaved in the REPL. To achieve this, the symbol table used for linking now carries phase information (i.e. the symtable is now mapping (identifier, phase) pairs to positions in the global data array).</li>
  <li>Cross-stage identifiers may now be quoted inside toplevel splices. To do that, it was necessary to make the typechecker track the top-levelness of the current environment, but also to propagate upwards the set of cross-stage identifiers encountered in the environment. The only missing form of cross-stage persistence (CSP) left to implement is <em>path closures</em>.</li>
  <li>Redaction of a report about macros to motivate a second, 6-month internship, starting in September.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I continue to improve the interface of MrMime</li>
  <li>I succeed to use the interface of david (it’s the same of angstorm project) - now, the user can produce its parser</li>
  <li>I find some littles regressions with my big test (my 2000 emails) - I will fix that</li>
  <li>We can use the bigstring instead the string module now (so, possibly, we can improve the performance - but I need some tests about that)</li>
  <li>I continue to documente the project and after we can have a release of MrMime</li>
  <li>For this week, I will work on Decompress (as Richard advise me) about the performance, I already a PoC from zlib so I will test it.</li>
  <li>I think I continue to work the morning on MrMime (because is just some fixes) and after I work on Decompress.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-06-13">
   13 June 2016 -  19 June 2016 (Week #25)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>Our perforation system allows programmers to annotate looping constructs which they believe can benefit from perforation. Compiling an annotated program into an optimized program which uses loop perforation is not straghtforward.</p>

<p>The most difficult task of this system is in finding the optimal perforation configuration. One solution is to profile every possible permutation of configurations. As this is entirely unfeasible the most truly difficult task is finding a heuristic which allows us to prioritize configurations.</p>

<p>After running some subset of all configurations, there will be a smaller subset of optimal configurations which form a time-error tradeoff curve. Our end result would present this graph to the user, allowing them to choose which tradeoff works best for them.</p>

<p>My time this week has been split between converting a black–scholes C implementation to OCaml and a first draft of our perforation program. The perforation program can successfully run different perforation configurations however there are no heuristics involved yet.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I continue to optimize MrMime and I will use the Bigstring (which is more faster than the String module) with my RingBuffer</li>
  <li>I finished to implement the interface (recommended by david) of my parser combinator (it is the same interface as the angstorm library from seliopou but with a different backend - as you know I use a ring-buffer)</li>
  <li>So I continue the large background work on MrMime and keep the stability (and avoid any regression) with my unit tests. So, nothing impressive but needed to concurrent any other implementation of email :)</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-06-06">
   06 June 2016 -  12 June 2016 (Week #24)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>A user cannot zealously apply approximate computing strategies to every line of every program they write. This week I have looked through three OCaml programs which I believe can benefit from approximation: 1. A ray tracer 2. A H.261 video decoder 3. The black–scholes algorithm for option pricing</p>

<p>Not all three programs have explicit for-loops—OCaml programmers tend to favor recursion—but all three have perforation opportunity.</p>

<p>My next step is to implement an interactive system which will guide a user in approximating their programs. It will first identify all potential loops/recursive calls in a program which allow perforation. Given this set it will then attempt to find the /best/ combination of perforation. Testing all possible combinations of loop perforation is unfeasible so some heuristics must be developed.</p>

<p>I also spent some time this week working on multicore OCaml. I wet my feet by writing a recursive lock implementation. The code can be found on [github] along with the [issue] requesting the implementation.</p>

<p><a href="https://github.com/ocamllabs/reagents/compare/master...philipdexter:recursive">github</a></p>

<p><a href="https://github.com/ocamllabs/reagents/issues/2">issue</a></p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>I finally implemented support of static components in coercions. Now, module interfaces can be fully constrained (not only a subset consisting only of runtime values).</li>
  <li>As a necessary condition for that change, the code duplication between <code class="highlighter-rouge">Translmod</code> and <code class="highlighter-rouge">Translstatic</code> was reduced to a minimum. Now, all <code class="highlighter-rouge">Translstatic</code> does is create the necessary lambda code to run splices.</li>
  <li>When trying to use external static code in REPL, I realized that the it couldn’t work because of the coexistence of ambiguous identifiers in the symbol table (e.g. <code class="highlighter-rouge">Expr</code> may be bound to the runtime part of the <code class="highlighter-rouge">Expr</code> module used in runtime code, or the static part of that module used in static code, a problem that doesn’t arise in <code class="highlighter-rouge">ocamlc</code> since only the static parts are run). I am currently working on adding phase information to the symbol table to resolve these ambiguities.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><p>I did some technical updates in MrMime:</p>
<ul>
  <li>First, I added an abstraction about the operating system (Windows and Unix)</li>
  <li>I reorganized the project to produce a good low-level API to manipulate an email</li>
  <li>I finished, as you know, the encoder (and I can produce an email now)</li>
  <li>I optimized the Base64 and the QuotedPrintable decoder (with tailcall optimization)</li>
  <li>I finished the pretty-printing of an email</li>
  <li>I fixed some little bugs between the encoder and the decoder</li>
  <li>And I added the support of UTF-8 with the uutfsoftware by daniel - now, I have only 3 errors with 2000 mails (so ~0.15% fails - so MrMime is more resilient)</li>
  <li>I talked with Daniel about the API and the support of UTF-8 (because an email can have many encoding data) and the main thing is to normalize the email on one encoding, the UTF-8. But, for that, I need another software to normalize any encoding to UTF-8 (daniel told me who will do)</li>
  <li>May be, the next week, I will start the SMTP protocol with the unikernel</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-05-30">
   30 May 2016 -  05 June 2016 (Week #23)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/philipdexter.png" height="50px" /><br />
    
    Philip Dexter
    </div>
    <div class="furore_output"><p>My work this summer is about providing approximate programming tools for OCaml programmers. There are several different styles of approximate computing; each requires of their users different technical knowledge of the subject.</p>

<p>As one example, loop perforation is an approximate computing technique where iterations of a loop are skipped in the pursuit of reducing resource usage (be it time or energy). A loop perforation build system will generally have a self tuning step where, given test input and a fitness function from the user, the system can automatically deduce an approximation strategy. Further refinement by the user is indeed an option, but this is a good example of a technique which asks little of its user.</p>

<p>Loop perforation’s ease of use leads KC and I to believe that adding a loop perforation system in OCaml is a great first step in the broader plan of supplying a goodie bag of approximation tools.</p>

<p>I have written a ppx extension for loop perforation. It is basic. In writing it I have both learned a lot about ppx extensions and expanded my compiler knowledge. The next steps are to decide whether to implement a self tuning system. If yes: the ppx extension and the self tuning system would make for a decent first release of an approximation system for OCaml. If no: there are other techniques for approximate computing that we can play with before we decide where to spend coding efforts.</p>

<p>We have met with a group in the lab which is interested in prolonging the flight time of their drone operations. It is hard to say whether there is a collaboration opportunity; approximate computing is not always the right tool for the job.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>The integration of Leo White’s quoting library, as well as the implementation of top-level splicing, were completed. As a consequence, it is now possible to compile programs containing macros as long as CSP is not needed (except CSP for global identifiers which comes for free), for example:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  open ^Pervasives
  static rec power' n x =
    if n = 0 then
      &lt;&lt; 1 &gt;&gt;
    else if n mod 2 = 0 then
      let y = power' (n/2) x in
      &lt;&lt; let z = $y in Pervasives.( * ) z z &gt;&gt;
    else
      &lt;&lt; Pervasives.( * ) $x $(power' (pred n) x) &gt;&gt;

  (* val power' : int -&gt; int expr -&gt; int expr = &lt;fun&gt; *)
  static power n =
    &lt;&lt; fun x -&gt; $(power' n &lt;&lt;x&gt;&gt;) &gt;&gt;
  (* val power : int -&gt; (int -&gt; int) expr = &lt;fun&gt; *)
  let power_five = $(power 5)
  (* val power_five : int -&gt; int = &lt;fun&gt; *)
</code></pre></div></div>

<ul>
  <li>Execution of static bindings and splices was implemented in the REPL. Declaring modules with static components in the REPL is not supported for now.</li>
  <li>The <code class="highlighter-rouge">Expr</code> module, for phase-invariant <code class="highlighter-rouge">'a -&gt; 'a expr</code> conversions, was added. Using this module it is for instance possible to write the following function:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  static rec range = function
    | 0 -&gt; &lt;&lt; [] &gt;&gt;
    | n -&gt; &lt;&lt; $(^Expr.of_int n) :: $(range (^Pervasives.pred n)) &gt;&gt;
</code></pre></div></div>

<ul>
  <li>The tracking of stage (defined as the number of surrounding quotes, minus the number of non-top-level splices) was implemented. It makes it possible to tell whether a identifier in a quote will be usable at the splicing point or whether some form of CSP is needed. Since CSP is not implemented at the moment, when encountering a (non-global) identifier of the wrong stage a type error is thrown. (Type errors don’t abruptly stop the program but show pretty-printed errors with the location of the problem).</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/engil.png" height="50px" /><br />
    
    Enguerrand Decorne
    </div>
    <div class="furore_output"><ul>
  <li>My first step is to take @yallop script to generate ctypes bindings and make it generate some OCaml parse tree instead of generating OCaml sources so I try to find some ways of integrating it easily in a Reason/OCaml flow. One of the goal would be trying to avoid as much as possible fighting with a build system</li>
  <li>I also took some time to finish a Reason js_of_ocaml REPL I started some months ago. We will probably communicate about it soon publicly, but for now it’s available there: https://engil.github.io/reason-web-toplevel/</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>So I focused this week on my abstract for the ICFP (so Richard corrected the paper and I have sent Friday)</li>
  <li>I continue to implement the pretty-printer of MrMime (I implemented without regresssion with my unit test)</li>
  <li>I start to look S/MIME (secure mail) - so may be I will implement with ocaml-tls the secure mail one time</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-05-23">
   23 May 2016 -  29 May 2016 (Week #22)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Phase mismatch is now detected in signatures (i.e. the compiler will complain if you try to match a <code class="highlighter-rouge">static val</code> and a <code class="highlighter-rouge">val</code>).</li>
  <li>We are now focusing on quoting and splicing. The splicing part involved quite a lot of refactoring in <code class="highlighter-rouge">Translstatic</code>: <code class="highlighter-rouge">Translstatic</code> used to translate an implementation file into a lambda creating the module and adding a reference to it in the symtable. Now the lambda generated by <code class="highlighter-rouge">Translstatic</code> not only creates the module but also returns an array of untyped ASTs, corresponding to all the splicings of code into phase zero (i.e. splicings that are not inside a quotation).</li>
  <li>In a new module <code class="highlighter-rouge">Runstatic</code>, this static lambda code is run and the splicings are actually reified. They are then used by <code class="highlighter-rouge">Translcore</code> to “fill” phase-zero splicings every time it encounters one. This approach is implemented and compiles, but not yet thoroughly tested, since to test splicing something has to be quoted, and the quoting library is not integrated into the compiler yet.</li>
  <li>Finally, I started working on integrating the quoting library written by Leo White. The main function <code class="highlighter-rouge">Translquote.quote_expression</code>, takes a typed tree and returns the lambda code that will generate the isomorphic <em>untyped</em> tree at run-time (well, at static run-time). This work is still going on.</li>
</ul>

<p>Limitations:</p>
<ul>
  <li>As stated above splicing is untested for now.</li>
  <li>Because I didn’t know whether I should reimplement some parts of <code class="highlighter-rouge">Translmod</code> in <code class="highlighter-rouge">Translstatic</code>, module coercions are still not handled by <code class="highlighter-rouge">Translstatic</code>. So for now, coercing static components of a <code class="highlighter-rouge">.ml</code> using a <code class="highlighter-rouge">.mli</code> won’t work — the fix is easy but I’m focusing on quoting for now.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I optimized the Base64 decoder but MrMime is slow with QuotedPrintable (but I have an idea to fix that)</li>
  <li>MrMime is more resilient with bad email (like an email without Fromand Dateinformation)</li>
  <li>I fixed some little bug (infinite loop, order of meta-data, multipart inception, unstructured data, and raised exception)</li>
  <li>I retrieved a regression with my test (so, I have a good tests suite) and I fixed this regression - it’s a specific problem with a wrong example from the standard RFC 822</li>
  <li>I started the implementation of pretty-printing, so I continue the prototype (I am inspired by the Format module from OCaml standard lib to respect the 80 characters rules)</li>
  <li>I will use an archive from the caml-list (from daniel) to have a good tests suit about the parsing of email (it’s a huge example about the old/bad emails)</li>
  <li>So this week, it’s just some fixes and a minimal prototype about the pretty-printing :s</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-05-16">
   16 May 2016 -  22 May 2016 (Week #21)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Support for loading static components of external modules was added. This implied compiling the static part of modules to <code class="highlighter-rouge">.cmm</code> files.</li>
  <li>When using lifted versions of standard modules (e.g. <code class="highlighter-rouge">Printf</code>), the compiler would load the corresponding <code class="highlighter-rouge">.cmo</code> file. The problem is that standard modules are already present in the bytecode of <code class="highlighter-rouge">ocamlc</code> itself, so lifted standard modules were, in a way, loaded twice. In addition of being useless, this second loading would cause problems with side effects implying
buffering (e.g. when using <code class="highlighter-rouge">Printf.printf</code>, the ordering of outputs was wrong). This
was fixed by adding a function <code class="highlighter-rouge">Symtable.init_static ()</code> that simply calls <code class="highlighter-rouge">init_toplevel ()</code> and then adds the lifted version of every global identifier (pointing to the same position in the bytecode) directly into the
symtable. This way, standard modules are not loaded twice, and their use no longer involves reading an external <code class="highlighter-rouge">.cmo</code> file.</li>
  <li>At that point the produced lambda code was highly unsafe to use because it pointed to runtime and static fields of external modules as though they were in a same record, which could lead to wrong indexes and segfaults. This was fixed for now by adding 0 as a placeholder for non-static (resp.non-runtime) components in <code class="highlighter-rouge">.cmm</code> (resp. <code class="highlighter-rouge">.cmo</code>) files. A more sophisticated way might be necessary in the long term.</li>
</ul>

<p>Limitations:</p>
<ul>
  <li>Constrained internal modules (i.e. <code class="highlighter-rouge">module M : sig ... end = struct...</code>) is not supported by <code class="highlighter-rouge">Translstatic</code> yet. Nor are functors. These constructions are translated as the unit lambda.</li>
  <li><code class="highlighter-rouge">Includemod</code> is still phase-agnostic, so interface mismatches involving values with the right name and the wrong phase will not be detected.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I updated MrMime with a new program maildir. You can execute this program with ./maildir -p /path/to/your/mails/ -n LFif the newline of your email is LF character (and it’s probably your case with mac osx). I retrieve two difficulties about the parsing:</li>
  <li>The difficulty to predict the end of the email - so may be you catch an infinite loop when you scan your emails</li>
  <li>The latency with Base64 and QuotedPrintable decoder (because, for each character, we need to try the boundary parser to stop the decoder)</li>
  <li>So you can use the project on two way. The first way is to use maildirbinary. But if you catch a infinite loop for example (or a weird exception), you can try with a specific email with utop -init test.ml(the second way). At this moment, you can compile the project with debug information (with ./configure –enable-trace and make install) and see where MrMime fails. The parsing is resilient with the malformed header. So now, I will implement the pretty-printing of email and prove if the parsing and pretty-printing is bijective (just to be on the safe side).</li>
</ul>

<p>(you need to configure the project with –enable-teststo get the maildirbinary)</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-05-09">
   09 May 2016 -  15 May 2016 (Week #20)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>Module lifting was implemented, i.e. external modules may now be used in static code by simply adding a caret (<code class="highlighter-rouge">^</code>) to their names, e.g.:</li>
</ul>

<p>Lifting of module defined inside the compilation unit (via <code class="highlighter-rouge">module M =
struct... end</code>) is not supported, as the definition of such modules may
depend on values that are only known at runtime. For this reason, only external, compiled modules can be lifted.</p>
<ul>
  <li>
    <p>Support for accessing static values of internal modules was added, i.e. the following compiles and prints what is expected:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module M = struct
  open ^Pervasives

  static rec take n = function
    | [] -&gt; []
    | x :: xs -&gt; if n &gt; 0 then x :: take (n-1) xs else []

  module N = struct
    static rec l = "0" :: l'
           and l' = "1" :: l
  end
end

open ^Pervasives

static () =
  print_endline @@ ^String.concat "" @@ M.take 10 M.N.l
</code></pre></div>    </div>
  </li>
</ul>

<p>Limitations:</p>
<ul>
  <li>Static value description in signatures (i.e. <code class="highlighter-rouge">static val x :
some_type</code>) are supported by the parser, but not handled by the typechecker for now, as it implies modifying <code class="highlighter-rouge">Includemod</code>. Handling static components in signatures will be necessary for the next step, that is, saving and loading static code from/to external files.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/engil.png" height="50px" /><br />
    
    Enguerrand Decorne
    </div>
    <div class="furore_output"><ul>
  <li>TLS: Halfway through the binding implementation, the configuration parsing from libtls is now working for ocaml-tls, only things left is writing and reading on sockets and the binding will be complete.</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I fixed some little bug with MrMime and the “real world” email</li>
  <li>Firstly, I use a script with fetchmail program to download my email</li>
  <li>But, I implemented a library to communicate with my GMail (with the POP3 protocol), you can see the project: https://github.com/oklm-wsh/Jackson (it’s a little project, and it just a prototype to test MrMime)</li>
  <li>So I continue to fix MrMime with the real world and automatize the test suite</li>
  <li>At the same time, I look sessions type and GADT in OCaml to create a tool to describe a protocol (like POP3 or SMTP) with GADT (so a typed protocol), may be if I have a good result with GADT (because it’s very complex), I use that for Jackson and for the implementation of SMTP</li>
  <li>So not specifically productive but, step by step, I have a little prototype to communicate with GMail (or another service) and a resilient implementation of email</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-05-02">
   02 May 2016 -  08 May 2016 (Week #19)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/oliviernicole.png" height="50px" /><br />
    
    Olivier Nicole
    </div>
    <div class="furore_output"><ul>
  <li>I implemented the <code class="highlighter-rouge">static</code> keyword; all right-hand sides of static bindings will be executed during compilation. So:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  static msg = "Hello"
  static () = print_endline msg
  let () = print_endline "runtime!"
</code></pre></div></div>

<p>will print “Hello” during compilation and “runtime!” when it’s run.
  I only implemented this feature in the bytecode compiler as we decided
  to focus on it for now.</p>

<p>At that point though, sharing static and runtime values is not
explicitely forbidden. So the following program:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  let msg = "let-bound"
  static () = print_endline msg
</code></pre></div></div>

<p>would make the compiler crash with a non-informative error message.</p>
<ul>
  <li>To address that, I split the environment into a static and a runtime part. So the above program would now be rejected with an “Unbound variable” message. That’s not very informative either, but a more explicit staging error should be easy to implement later.</li>
  <li>Currently, static bindings cannot refer to other modules than the one being compiled. So the program:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  static () = print_endline A.msg
</code></pre></div></div>

<p>fails with the error “Undefined global A”, even if the files <code class="highlighter-rouge">a.cmi</code>
  and <code class="highlighter-rouge">a.cmo</code> are in the include path.  The only exception to this are
  the stdlib modules (such as <code class="highlighter-rouge">Printf</code> and <code class="highlighter-rouge">Pervasives</code>), because their
  bytecode is contained in the ocamlc program. So there needs to be a
  way to use non-standard modules in static code.</p>

<p>It appears that this triggers not only implementation question, but
  design issues. For example values from non-static modules should not
  be usable in static code, but the types exported by these modules
  should, otherwise lots of useful macros would be ill-formed. For
  example, when performing a quote:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  module M = struct
    type t = T
    let x = T
  end

  macro m () = (&lt;&lt; M.x &gt;&gt; : M.t expr)
</code></pre></div></div>

<p>This very simple macro would be rejected if types weren’t shared across stages. So there needs to be a distinct treatment between types and values.</p>

<ul>
  <li>Finally, the use of lifted modules (i.e. modules exporting non-static values that are used in static code of another module) raises lots of questions, as there can be two versions of a module in the same code: a lifted version and a non-lifted version, as in:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  static module M = struct
    type t = T
    let x = T
  end

  module M = struct
    type t = S
    let x = S
  end

  static foo = (M.x : M.t)
</code></pre></div></div>

<p>In <code class="highlighter-rouge">M.x : M.t</code>, <code class="highlighter-rouge">M.x</code> refers to the static module, but to which module does <code class="highlighter-rouge">M.t</code> refer? Since types are shared across stages, this is ambiguous. There are lot of examples where referring to lifted and non-lifted modules using the same name is a problem. I don’t fully understand all these examples yet. ^^</p>

<p>That’s why Leo White came up with the proposition to make lifting syntactically explicit. For example, the lifted version of a module <code class="highlighter-rouge">Foo</code> would be <code class="highlighter-rouge">^Foo</code>.</p>

<p>On the implementation level, this implies to come back on a few changes made previously to the compiler, but it should eventually make implementation easier.</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/engil.png" height="50px" /><br />
    
    Enguerrand Decorne
    </div>
    <div class="furore_output"><ul>
  <li>TLS: Implemented a few simple clients and servers using various C TLS libraries (libtls, mbedtls) to understand their API. Started to implement the binding trying to replicate libtls’s interface.</li>
  <li>Various things on Canopy (bugfixes)</li>
  <li>Spent some time playing with Reason (reading the doc, tried to implement a web toplevel for Reason using js_of_ocaml), tried to debug an issue with ocaml-git</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>As you know, I released Syndic 1.5 with ptime to compile in MirageOS. Hannes merged this change in Canopy</li>
  <li>I optimized Decompress and I won 4 MB/s in Inflate</li>
  <li>Jeremy Yallop send me a snippet for Decompress to win 2 MB/s (I didn’t try this snippet yet but it is my TODO)</li>
  <li>I came back to MrMime and fixed little bug in multipart parsing</li>
  <li>I reorganized MrMime to have a better interface</li>
  <li>I tried to use ocaml-imap to communicate with my GMail and it’s work fine</li>
  <li>But I’m focussing on the test of parsing now so I think the next, I will do just a many test to prove the maturity of MrMime (I already started)</li>
  <li>May be I cook some cookies tomorrow for Monday :)</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-04-18">
   18 April 2016 -  24 April 2016 (Week #17)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/engil.png" height="50px" /><br />
    
    Enguerrand Decorne
    </div>
    <div class="furore_output"><ul>
  <li>ocaml-tls binding: Separating handling of IOs from the OCaml code: now the C program must handle all IOs (networking, file reading)…</li>
  <li>As of friday this is mostly finished and the handshake from a simple C TLS client is working.</li>
  <li>A working prototype of the binding is to expect by the end of next week.</li>
  <li>Worked on Canopy: Improved CSS, various bugfixes and PR reviews</li>
</ul>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>I fixed some bug with parsing of email and header</li>
  <li>I implemented the RFC 5321 (to have a literal domain in an email) and use Ipaddr library for this part</li>
  <li>I implemented the validator website (http://oklm-wsh.github.io/Validator/validator.html) with some tests of email</li>
  <li>I implemented the header fields from RFC 2045</li>
  <li>I attacked the implementation of RFC 2046 (a multipart email)</li>
  <li>I implemented a PPX to inject an IANA database in MrMime project (and I talked about that with Rudy for an integrate of that in Cohttp maybe)</li>
</ul>

<p>I talked with Richard Mortier and I think I will avoid the implementation of RFC 3798 (to permit a long parameter in a Content-Type field) and move fast to the implementation in a unikernel when I finish the multipart. So I think it is the last last RFC (to much RFC …).</p>

</div>
  </div>
  <br />
  
  
  
  <div class="furore_date" id="2016-04-11">
   11 April 2016 -  17 April 2016 (Week #16)
  </div>
  
  
  <div class="furore_entry">
    <div class="furore_author">
    
    
     <img src="/assets/img/dinosaure.png" height="50px" /><br />
    
    Romain Calascibetta
    </div>
    <div class="furore_output"><ul>
  <li>A robust implementation of email (I check with a complete suit test from another implementation in PHP and JavaScript)</li>
  <li>A robust implementation of meta-data of email (the header of email), it’s compliant with old and new standard - 822, 2822 and 5322)</li>
  <li>A beginning implementation of multipart email (I implemented Base64 and QuotedPrintable compute for encoded data)</li>
  <li>Implementation of inline encoded data (compliant with the standard 2047)</li>
</ul>

<p>You can see all at: <a href="https://github.com/oklm-wsh/MrMime">https://github.com/oklm-wsh/MrMime</a></p>

</div>
  </div>
  <br />
  
</div>

          </div>
        </div>
      </div>
      <footer class="site-footer">
  <div class="container">
    <div class="footer left column one-half">
      <section class="small-font">
        Content © 2012-2017 under a <a href="https://wiki.creativecommons.org/wiki/CC0">CC0</a> license.<br />
        Theme based on <a href="https://github.com/wild-flame/jekyll-simple">Jekyll-Simple</a> by <a href="http://wildflame.me">wildflame</a>.
      </section>
    </div>

    <div class="footer right column one-half">
      <section class="small-font">
        
        <a href="https://github.com/ocamllabs"><i class="fa fa-github fa-2x"></i></a>
        
        
        <a href="https://twitter.com/ocamllabs"><i class="fa fa-twitter fa-2x"></i></a>
        
      </section>
    </div>
  </div>
</footer>
 
    </div>
  </body>
</html>
